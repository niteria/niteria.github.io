<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- (c) The University of Glasgow 2006</span><span>
</span><a name="line-2"></a><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE CPP, DeriveDataTypeable #-}</span><span>
</span><a name="line-4"></a><span>
</span><a name="line-5"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">TcEvidence</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-6"></a><span>
</span><a name="line-7"></a><span>  </span><span class="hs-comment">-- HsWrapper</span><span>
</span><a name="line-8"></a><span>  </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-9"></a><span>  </span><span class="hs-special">(</span><a href="TcEvidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpTyApps"><span class="hs-identifier hs-var">mkWpTyApps</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpEvApps"><span class="hs-identifier hs-var">mkWpEvApps</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpEvVarApps"><span class="hs-identifier hs-var">mkWpEvVarApps</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpTyLams"><span class="hs-identifier hs-var">mkWpTyLams</span></a><span class="hs-special">,</span><span>
</span><a name="line-10"></a><span>  </span><a href="TcEvidence.html#mkWpLams"><span class="hs-identifier hs-var">mkWpLams</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpLet"><span class="hs-identifier hs-var">mkWpLet</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpCastN"><span class="hs-identifier hs-var">mkWpCastN</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpCastR"><span class="hs-identifier hs-var">mkWpCastR</span></a><span class="hs-special">,</span><span>
</span><a name="line-11"></a><span>  </span><a href="TcEvidence.html#mkWpFun"><span class="hs-identifier hs-var">mkWpFun</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpFuns"><span class="hs-identifier hs-var">mkWpFuns</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#idHsWrapper"><span class="hs-identifier hs-var">idHsWrapper</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#isIdHsWrapper"><span class="hs-identifier hs-var">isIdHsWrapper</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#pprHsWrapper"><span class="hs-identifier hs-var">pprHsWrapper</span></a><span class="hs-special">,</span><span>
</span><a name="line-12"></a><span>
</span><a name="line-13"></a><span>  </span><span class="hs-comment">-- Evidence bindings</span><span>
</span><a name="line-14"></a><span>  </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-15"></a><span>  </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#emptyEvBindMap"><span class="hs-identifier hs-var">emptyEvBindMap</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#extendEvBinds"><span class="hs-identifier hs-var">extendEvBinds</span></a><span class="hs-special">,</span><span>
</span><a name="line-16"></a><span>  </span><a href="TcEvidence.html#lookupEvBind"><span class="hs-identifier hs-var">lookupEvBind</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#evBindMapBinds"><span class="hs-identifier hs-var">evBindMapBinds</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#foldEvBindMap"><span class="hs-identifier hs-var">foldEvBindMap</span></a><span class="hs-special">,</span><span>
</span><a name="line-17"></a><span>  </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#emptyTcEvBinds"><span class="hs-identifier hs-var">emptyTcEvBinds</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#isEmptyTcEvBinds"><span class="hs-identifier hs-var">isEmptyTcEvBinds</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkGivenEvBind"><span class="hs-identifier hs-var">mkGivenEvBind</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWantedEvBind"><span class="hs-identifier hs-var">mkWantedEvBind</span></a><span class="hs-special">,</span><span>
</span><a name="line-18"></a><span>  </span><a href="TcEvidence.html#sccEvBinds"><span class="hs-identifier hs-var">sccEvBinds</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#evBindVar"><span class="hs-identifier hs-var">evBindVar</span></a><span class="hs-special">,</span><span>
</span><a name="line-19"></a><span>  </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkEvCast"><span class="hs-identifier hs-var">mkEvCast</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkEvScSelectors"><span class="hs-identifier hs-var">mkEvScSelectors</span></a><span class="hs-special">,</span><span>
</span><a name="line-20"></a><span>  </span><a href="TcEvidence.html#EvLit"><span class="hs-identifier hs-type">EvLit</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#evTermCoercion"><span class="hs-identifier hs-var">evTermCoercion</span></a><span class="hs-special">,</span><span>
</span><a name="line-21"></a><span>  </span><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier hs-type">EvCallStack</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-22"></a><span>  </span><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span>  </span><span class="hs-comment">-- TcCoercion</span><span>
</span><a name="line-25"></a><span>  </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#TcCoercionP"><span class="hs-identifier hs-type">TcCoercionP</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a><span class="hs-special">,</span><span>
</span><a name="line-26"></a><span>  </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#pickLR"><span class="hs-identifier hs-var">pickLR</span></a><span class="hs-special">,</span><span>
</span><a name="line-27"></a><span>  </span><a href="TcEvidence.html#mkTcReflCo"><span class="hs-identifier hs-var">mkTcReflCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcNomReflCo"><span class="hs-identifier hs-var">mkTcNomReflCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcRepReflCo"><span class="hs-identifier hs-var">mkTcRepReflCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-28"></a><span>  </span><a href="TcEvidence.html#mkTcTyConAppCo"><span class="hs-identifier hs-var">mkTcTyConAppCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcAppCo"><span class="hs-identifier hs-var">mkTcAppCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcFunCo"><span class="hs-identifier hs-var">mkTcFunCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-29"></a><span>  </span><a href="TcEvidence.html#mkTcAxInstCo"><span class="hs-identifier hs-var">mkTcAxInstCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcUnbranchedAxInstCo"><span class="hs-identifier hs-var">mkTcUnbranchedAxInstCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcForAllCo"><span class="hs-identifier hs-var">mkTcForAllCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcForAllCos"><span class="hs-identifier hs-var">mkTcForAllCos</span></a><span class="hs-special">,</span><span>
</span><a name="line-30"></a><span>  </span><a href="TcEvidence.html#mkTcSymCo"><span class="hs-identifier hs-var">mkTcSymCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcTransCo"><span class="hs-identifier hs-var">mkTcTransCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcNthCo"><span class="hs-identifier hs-var">mkTcNthCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcLRCo"><span class="hs-identifier hs-var">mkTcLRCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcSubCo"><span class="hs-identifier hs-var">mkTcSubCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#maybeTcSubCo"><span class="hs-identifier hs-var">maybeTcSubCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-31"></a><span>  </span><a href="TcEvidence.html#tcDowngradeRole"><span class="hs-identifier hs-var">tcDowngradeRole</span></a><span class="hs-special">,</span><span>
</span><a name="line-32"></a><span>  </span><a href="TcEvidence.html#mkTcAxiomRuleCo"><span class="hs-identifier hs-var">mkTcAxiomRuleCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcCoherenceLeftCo"><span class="hs-identifier hs-var">mkTcCoherenceLeftCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcCoherenceRightCo"><span class="hs-identifier hs-var">mkTcCoherenceRightCo</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkTcPhantomCo"><span class="hs-identifier hs-var">mkTcPhantomCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-33"></a><span>  </span><a href="TcEvidence.html#mkTcKindCo"><span class="hs-identifier hs-var">mkTcKindCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-34"></a><span>  </span><a href="TcEvidence.html#tcCoercionKind"><span class="hs-identifier hs-var">tcCoercionKind</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#coVarsOfTcCo"><span class="hs-identifier hs-var">coVarsOfTcCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-35"></a><span>  </span><a href="TcEvidence.html#mkTcCoVarCo"><span class="hs-identifier hs-var">mkTcCoVarCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-36"></a><span>  </span><a href="TcEvidence.html#isTcReflCo"><span class="hs-identifier hs-var">isTcReflCo</span></a><span class="hs-special">,</span><span>
</span><a name="line-37"></a><span>  </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-identifier hs-var">tcCoercionRole</span></a><span class="hs-special">,</span><span>
</span><a name="line-38"></a><span>  </span><a href="TcEvidence.html#unwrapIP"><span class="hs-identifier hs-var">unwrapIP</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#wrapIP"><span class="hs-identifier hs-var">wrapIP</span></a><span>
</span><a name="line-39"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-40"></a><span class="hs-cpp">#include &quot;HsVersions.h&quot;</span><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span> </span><a href="Var.html"><span class="hs-identifier">Var</span></a><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span> </span><a href="CoAxiom.html"><span class="hs-identifier">CoAxiom</span></a><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span> </span><a href="Coercion.html"><span class="hs-identifier">Coercion</span></a><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span> </span><a href="PprCore.html"><span class="hs-identifier">PprCore</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Instance OutputableBndr TyVar</span><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span> </span><a href="TcType.html"><span class="hs-identifier">TcType</span></a><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><a href="Type.html"><span class="hs-identifier">Type</span></a><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span> </span><a href="TyCon.html"><span class="hs-identifier">TyCon</span></a><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><a href="Class.html"><span class="hs-identifier">Class</span></a><span class="hs-special">(</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><a href="PrelNames.html"><span class="hs-identifier">PrelNames</span></a><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span> </span><a href="DynFlags.html"><span class="hs-identifier">DynFlags</span></a><span>   </span><span class="hs-special">(</span><span> </span><a href="DynFlags.html#gopt"><span class="hs-identifier hs-var">gopt</span></a><span class="hs-special">,</span><span> </span><a href="DynFlags.html#GeneralFlag"><span class="hs-identifier hs-type">GeneralFlag</span></a><span class="hs-special">(</span><a href="DynFlags.html#Opt_PrintTypecheckerElaboration"><span class="hs-identifier hs-var">Opt_PrintTypecheckerElaboration</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-52"></a><span class="hs-keyword">import</span><span> </span><a href="VarEnv.html"><span class="hs-identifier">VarEnv</span></a><span>
</span><a name="line-53"></a><span class="hs-keyword">import</span><span> </span><a href="VarSet.html"><span class="hs-identifier">VarSet</span></a><span>
</span><a name="line-54"></a><span class="hs-keyword">import</span><span> </span><a href="Name.html"><span class="hs-identifier">Name</span></a><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><a href="Pair.html"><span class="hs-identifier">Pair</span></a><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><a href="Util.html"><span class="hs-identifier">Util</span></a><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span> </span><a href="Bag.html"><span class="hs-identifier">Bag</span></a><span>
</span><a name="line-59"></a><span class="hs-keyword">import</span><span> </span><a href="Digraph.html"><span class="hs-identifier">Digraph</span></a><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Data</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Data</span><span>
</span><a name="line-61"></a><span class="hs-keyword">import</span><span> </span><a href="Outputable.html"><span class="hs-identifier">Outputable</span></a><span>
</span><a name="line-62"></a><span class="hs-keyword">import</span><span> </span><a href="FastString.html"><span class="hs-identifier">FastString</span></a><span>
</span><a name="line-63"></a><span class="hs-keyword">import</span><span> </span><a href="SrcLoc.html"><span class="hs-identifier">SrcLoc</span></a><span>
</span><a name="line-64"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.IORef.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">IORef</span></a><span class="hs-special">(</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-65"></a><span>
</span><a name="line-66"></a><span class="hs-comment">{-
Note [TcCoercions]
~~~~~~~~~~~~~~~~~~
| TcCoercions are a hack used by the typechecker. Normally,
Coercions have free variables of type (a ~# b): we call these
CoVars. However, the type checker passes around equality evidence
(boxed up) at type (a ~ b).

An TcCoercion is simply a Coercion whose free variables have may be either
boxed or unboxed. After we are done with typechecking the desugarer finds the
boxed free variables, unboxes them, and creates a resulting real Coercion with
kosher free variables.

-}</span><span>
</span><a name="line-80"></a><span>
</span><a name="line-81"></a><span class="hs-keyword">type</span><span> </span><a name="TcCoercion"><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier">TcCoercion</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a><span>
</span><a name="line-82"></a><span class="hs-keyword">type</span><span> </span><a name="TcCoercionN"><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier">TcCoercionN</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a><span>    </span><span class="hs-comment">-- A Nominal          corecion ~N</span><span>
</span><a name="line-83"></a><span class="hs-keyword">type</span><span> </span><a name="TcCoercionR"><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier">TcCoercionR</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a><span>    </span><span class="hs-comment">-- A Representational corecion ~R</span><span>
</span><a name="line-84"></a><span class="hs-keyword">type</span><span> </span><a name="TcCoercionP"><a href="TcEvidence.html#TcCoercionP"><span class="hs-identifier">TcCoercionP</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#CoercionP"><span class="hs-identifier hs-type">CoercionP</span></a><span>    </span><span class="hs-comment">-- a phantom coercion</span><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span class="hs-identifier">mkTcReflCo</span><span>             </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-87"></a><span class="hs-identifier">mkTcSymCo</span><span>              </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-88"></a><span class="hs-identifier">mkTcTransCo</span><span>            </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-89"></a><span class="hs-identifier">mkTcNomReflCo</span><span>          </span><span class="hs-glyph">::</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span>
</span><a name="line-90"></a><span class="hs-identifier">mkTcRepReflCo</span><span>          </span><span class="hs-glyph">::</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span>
</span><a name="line-91"></a><span class="hs-identifier">mkTcTyConAppCo</span><span>         </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-92"></a><span class="hs-identifier">mkTcAppCo</span><span>              </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-93"></a><span class="hs-identifier">mkTcFunCo</span><span>              </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-94"></a><span class="hs-identifier">mkTcAxInstCo</span><span>           </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoAxiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a><span> </span><a href="#local-1627784958"><span class="hs-identifier hs-type">br</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoAxiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a><span>
</span><a name="line-95"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-96"></a><span class="hs-identifier">mkTcUnbranchedAxInstCo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a><span> </span><a href="CoAxiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span>
</span><a name="line-97"></a><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span>
</span><a name="line-98"></a><span class="hs-identifier">mkTcForAllCo</span><span>           </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-99"></a><span class="hs-identifier">mkTcForAllCos</span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-100"></a><span class="hs-identifier">mkTcNthCo</span><span>              </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-101"></a><span class="hs-identifier">mkTcLRCo</span><span>               </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-102"></a><span class="hs-identifier">mkTcSubCo</span><span>              </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span>
</span><a name="line-103"></a><span class="hs-identifier">maybeTcSubCo</span><span>           </span><span class="hs-glyph">::</span><span> </span><a href="Type.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-104"></a><span class="hs-identifier">tcDowngradeRole</span><span>        </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-105"></a><span class="hs-identifier">mkTcAxiomRuleCo</span><span>        </span><span class="hs-glyph">::</span><span> </span><a href="CoAxiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span>
</span><a name="line-106"></a><span class="hs-identifier">mkTcCoherenceLeftCo</span><span>    </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-107"></a><span class="hs-identifier">mkTcCoherenceRightCo</span><span>   </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-108"></a><span class="hs-identifier">mkTcPhantomCo</span><span>          </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionP"><span class="hs-identifier hs-type">TcCoercionP</span></a><span>
</span><a name="line-109"></a><span class="hs-identifier">mkTcKindCo</span><span>             </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span>
</span><a name="line-110"></a><span class="hs-identifier">mkTcCoVarCo</span><span>            </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-111"></a><span>
</span><a name="line-112"></a><span class="hs-identifier">tcCoercionKind</span><span>         </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span>
</span><a name="line-113"></a><span class="hs-identifier">tcCoercionRole</span><span>         </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CoAxiom.html#Role"><span class="hs-identifier hs-type">Role</span></a><span>
</span><a name="line-114"></a><span class="hs-identifier">coVarsOfTcCo</span><span>           </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcTyCoVarSet"><span class="hs-identifier hs-type">TcTyCoVarSet</span></a><span>
</span><a name="line-115"></a><span class="hs-identifier">isTcReflCo</span><span>             </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-116"></a><span>
</span><a name="line-117"></a><a name="mkTcReflCo"><a href="TcEvidence.html#mkTcReflCo"><span class="hs-identifier">mkTcReflCo</span></a></a><span>             </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkReflCo"><span class="hs-identifier hs-var">mkReflCo</span></a><span>
</span><a name="line-118"></a><a name="mkTcSymCo"><a href="TcEvidence.html#mkTcSymCo"><span class="hs-identifier">mkTcSymCo</span></a></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkSymCo"><span class="hs-identifier hs-var">mkSymCo</span></a><span>
</span><a name="line-119"></a><a name="mkTcTransCo"><a href="TcEvidence.html#mkTcTransCo"><span class="hs-identifier">mkTcTransCo</span></a></a><span>            </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkTransCo"><span class="hs-identifier hs-var">mkTransCo</span></a><span>
</span><a name="line-120"></a><a name="mkTcNomReflCo"><a href="TcEvidence.html#mkTcNomReflCo"><span class="hs-identifier">mkTcNomReflCo</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkNomReflCo"><span class="hs-identifier hs-var">mkNomReflCo</span></a><span>
</span><a name="line-121"></a><a name="mkTcRepReflCo"><a href="TcEvidence.html#mkTcRepReflCo"><span class="hs-identifier">mkTcRepReflCo</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkRepReflCo"><span class="hs-identifier hs-var">mkRepReflCo</span></a><span>
</span><a name="line-122"></a><a name="mkTcTyConAppCo"><a href="TcEvidence.html#mkTcTyConAppCo"><span class="hs-identifier">mkTcTyConAppCo</span></a></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkTyConAppCo"><span class="hs-identifier hs-var">mkTyConAppCo</span></a><span>
</span><a name="line-123"></a><a name="mkTcAppCo"><a href="TcEvidence.html#mkTcAppCo"><span class="hs-identifier">mkTcAppCo</span></a></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkAppCo"><span class="hs-identifier hs-var">mkAppCo</span></a><span>
</span><a name="line-124"></a><a name="mkTcFunCo"><a href="TcEvidence.html#mkTcFunCo"><span class="hs-identifier">mkTcFunCo</span></a></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkFunCo"><span class="hs-identifier hs-var">mkFunCo</span></a><span>
</span><a name="line-125"></a><a name="mkTcAxInstCo"><a href="TcEvidence.html#mkTcAxInstCo"><span class="hs-identifier">mkTcAxInstCo</span></a></a><span>           </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkAxInstCo"><span class="hs-identifier hs-var">mkAxInstCo</span></a><span>
</span><a name="line-126"></a><a name="mkTcUnbranchedAxInstCo"><a href="TcEvidence.html#mkTcUnbranchedAxInstCo"><span class="hs-identifier">mkTcUnbranchedAxInstCo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkUnbranchedAxInstCo"><span class="hs-identifier hs-var">mkUnbranchedAxInstCo</span></a><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a><span>
</span><a name="line-127"></a><a name="mkTcForAllCo"><a href="TcEvidence.html#mkTcForAllCo"><span class="hs-identifier">mkTcForAllCo</span></a></a><span>           </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkForAllCo"><span class="hs-identifier hs-var">mkForAllCo</span></a><span>
</span><a name="line-128"></a><a name="mkTcForAllCos"><a href="TcEvidence.html#mkTcForAllCos"><span class="hs-identifier">mkTcForAllCos</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkForAllCos"><span class="hs-identifier hs-var">mkForAllCos</span></a><span>
</span><a name="line-129"></a><a name="mkTcNthCo"><a href="TcEvidence.html#mkTcNthCo"><span class="hs-identifier">mkTcNthCo</span></a></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkNthCo"><span class="hs-identifier hs-var">mkNthCo</span></a><span>
</span><a name="line-130"></a><a name="mkTcLRCo"><a href="TcEvidence.html#mkTcLRCo"><span class="hs-identifier">mkTcLRCo</span></a></a><span>               </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkLRCo"><span class="hs-identifier hs-var">mkLRCo</span></a><span>
</span><a name="line-131"></a><a name="mkTcSubCo"><a href="TcEvidence.html#mkTcSubCo"><span class="hs-identifier">mkTcSubCo</span></a></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkSubCo"><span class="hs-identifier hs-var">mkSubCo</span></a><span>
</span><a name="line-132"></a><a name="maybeTcSubCo"><a href="TcEvidence.html#maybeTcSubCo"><span class="hs-identifier">maybeTcSubCo</span></a></a><span>           </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#maybeSubCo"><span class="hs-identifier hs-var">maybeSubCo</span></a><span>
</span><a name="line-133"></a><a name="tcDowngradeRole"><a href="TcEvidence.html#tcDowngradeRole"><span class="hs-identifier">tcDowngradeRole</span></a></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#downgradeRole"><span class="hs-identifier hs-var">downgradeRole</span></a><span>
</span><a name="line-134"></a><a name="mkTcAxiomRuleCo"><a href="TcEvidence.html#mkTcAxiomRuleCo"><span class="hs-identifier">mkTcAxiomRuleCo</span></a></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkAxiomRuleCo"><span class="hs-identifier hs-var">mkAxiomRuleCo</span></a><span>
</span><a name="line-135"></a><a name="mkTcCoherenceLeftCo"><a href="TcEvidence.html#mkTcCoherenceLeftCo"><span class="hs-identifier">mkTcCoherenceLeftCo</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkCoherenceLeftCo"><span class="hs-identifier hs-var">mkCoherenceLeftCo</span></a><span>
</span><a name="line-136"></a><a name="mkTcCoherenceRightCo"><a href="TcEvidence.html#mkTcCoherenceRightCo"><span class="hs-identifier">mkTcCoherenceRightCo</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkCoherenceRightCo"><span class="hs-identifier hs-var">mkCoherenceRightCo</span></a><span>
</span><a name="line-137"></a><a name="mkTcPhantomCo"><a href="TcEvidence.html#mkTcPhantomCo"><span class="hs-identifier">mkTcPhantomCo</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkPhantomCo"><span class="hs-identifier hs-var">mkPhantomCo</span></a><span>
</span><a name="line-138"></a><a name="mkTcKindCo"><a href="TcEvidence.html#mkTcKindCo"><span class="hs-identifier">mkTcKindCo</span></a></a><span>             </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkKindCo"><span class="hs-identifier hs-var">mkKindCo</span></a><span>
</span><a name="line-139"></a><a name="mkTcCoVarCo"><a href="TcEvidence.html#mkTcCoVarCo"><span class="hs-identifier">mkTcCoVarCo</span></a></a><span>            </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a><span>
</span><a name="line-140"></a><span>
</span><a name="line-141"></a><a name="tcCoercionKind"><a href="TcEvidence.html#tcCoercionKind"><span class="hs-identifier">tcCoercionKind</span></a></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#coercionKind"><span class="hs-identifier hs-var">coercionKind</span></a><span>
</span><a name="line-142"></a><a name="tcCoercionRole"><a href="TcEvidence.html#tcCoercionRole"><span class="hs-identifier">tcCoercionRole</span></a></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a><span>
</span><a name="line-143"></a><a name="coVarsOfTcCo"><a href="TcEvidence.html#coVarsOfTcCo"><span class="hs-identifier">coVarsOfTcCo</span></a></a><span>           </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#coVarsOfCo"><span class="hs-identifier hs-var">coVarsOfCo</span></a><span>
</span><a name="line-144"></a><a name="isTcReflCo"><a href="TcEvidence.html#isTcReflCo"><span class="hs-identifier">isTcReflCo</span></a></a><span>             </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#isReflCo"><span class="hs-identifier hs-var">isReflCo</span></a><span>
</span><a name="line-145"></a><span>
</span><a name="line-146"></a><span>
</span><a name="line-147"></a><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
                  HsWrapper
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-154"></a><span>
</span><a name="line-155"></a><span class="hs-keyword">data</span><span> </span><a name="HsWrapper"><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier">HsWrapper</span></a></a><span>
</span><a name="line-156"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="WpHole"><a href="TcEvidence.html#WpHole"><span class="hs-identifier">WpHole</span></a></a><span>                      </span><span class="hs-comment">-- The identity coercion</span><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpCompose"><a href="TcEvidence.html#WpCompose"><span class="hs-identifier">WpCompose</span></a></a><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-159"></a><span>       </span><span class="hs-comment">-- (wrap1 `WpCompose` wrap2)[e] = wrap1[ wrap2[ e ]]</span><span>
</span><a name="line-160"></a><span>       </span><span class="hs-comment">--</span><span>
</span><a name="line-161"></a><span>       </span><span class="hs-comment">-- Hence  (\a. []) `WpCompose` (\b. []) = (\a b. [])</span><span>
</span><a name="line-162"></a><span>       </span><span class="hs-comment">-- But    ([] a)   `WpCompose` ([] b)   = ([] b a)</span><span>
</span><a name="line-163"></a><span>
</span><a name="line-164"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpFun"><a href="TcEvidence.html#WpFun"><span class="hs-identifier">WpFun</span></a></a><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span>
</span><a name="line-165"></a><span>       </span><span class="hs-comment">-- (WpFun wrap1 wrap2 t1)[e] = \(x:t1). wrap2[ e wrap1[x] ]</span><span>
</span><a name="line-166"></a><span>       </span><span class="hs-comment">-- So note that if  wrap1 :: exp_arg &lt;= act_arg</span><span>
</span><a name="line-167"></a><span>       </span><span class="hs-comment">--                  wrap2 :: act_res &lt;= exp_res</span><span>
</span><a name="line-168"></a><span>       </span><span class="hs-comment">--           then   WpFun wrap1 wrap2 : (act_arg -&gt; arg_res) &lt;= (exp_arg -&gt; exp_res)</span><span>
</span><a name="line-169"></a><span>       </span><span class="hs-comment">-- This isn't the same as for mkFunCo, but it has to be this way</span><span>
</span><a name="line-170"></a><span>       </span><span class="hs-comment">-- because we can't use 'sym' to flip around these HsWrappers</span><span>
</span><a name="line-171"></a><span>       </span><span class="hs-comment">-- The TcType is the &quot;from&quot; type of the first wrapper</span><span>
</span><a name="line-172"></a><span>
</span><a name="line-173"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpCast"><a href="TcEvidence.html#WpCast"><span class="hs-identifier">WpCast</span></a></a><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span>        </span><span class="hs-comment">-- A cast:  [] `cast` co</span><span>
</span><a name="line-174"></a><span>                              </span><span class="hs-comment">-- Guaranteed not the identity coercion</span><span>
</span><a name="line-175"></a><span>                              </span><span class="hs-comment">-- At role Representational</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span>        </span><span class="hs-comment">-- Evidence abstraction and application</span><span>
</span><a name="line-178"></a><span>        </span><span class="hs-comment">-- (both dictionaries and coercions)</span><span>
</span><a name="line-179"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpEvLam"><a href="TcEvidence.html#WpEvLam"><span class="hs-identifier">WpEvLam</span></a></a><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span>               </span><span class="hs-comment">-- \d. []       the 'd' is an evidence variable</span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpEvApp"><a href="TcEvidence.html#WpEvApp"><span class="hs-identifier">WpEvApp</span></a></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span>              </span><span class="hs-comment">-- [] d         the 'd' is evidence for a constraint</span><span>
</span><a name="line-181"></a><span>        </span><span class="hs-comment">-- Kind and Type abstraction and application</span><span>
</span><a name="line-182"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpTyLam"><a href="TcEvidence.html#WpTyLam"><span class="hs-identifier">WpTyLam</span></a></a><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>       </span><span class="hs-comment">-- \a. []  the 'a' is a type/kind variable (not coercion var)</span><span>
</span><a name="line-183"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpTyApp"><a href="TcEvidence.html#WpTyApp"><span class="hs-identifier">WpTyApp</span></a></a><span> </span><a href="TyCoRep.html#KindOrType"><span class="hs-identifier hs-type">KindOrType</span></a><span>  </span><span class="hs-comment">-- [] t    the 't' is a type (not coercion)</span><span>
</span><a name="line-184"></a><span>
</span><a name="line-185"></a><span>
</span><a name="line-186"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="WpLet"><a href="TcEvidence.html#WpLet"><span class="hs-identifier">WpLet</span></a></a><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span>             </span><span class="hs-comment">-- Non-empty (or possibly non-empty) evidence bindings,</span><span>
</span><a name="line-187"></a><span>                                </span><span class="hs-comment">-- so that the identity coercion is always exactly WpHole</span><span>
</span><a name="line-188"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Typeable</span></a><span class="hs-special">)</span><span>
</span><a name="line-189"></a><span>
</span><a name="line-190"></a><span>
</span><a name="line-191"></a><span class="hs-special">(</span><span class="hs-operator">&lt;.&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-192"></a><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span> </span><a name="%3C.%3E"><a href="TcEvidence.html#%3C.%3E"><span class="hs-operator">&lt;.&gt;</span></a></a><span> </span><a name="local-1627784959"><a href="#local-1627784959"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627784959"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-193"></a><a name="local-1627784960"><a href="#local-1627784960"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-operator">&lt;.&gt;</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627784960"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-194"></a><a name="local-1627784961"><a href="#local-1627784961"><span class="hs-identifier">c1</span></a></a><span> </span><span class="hs-operator">&lt;.&gt;</span><span> </span><a name="local-1627784962"><a href="#local-1627784962"><span class="hs-identifier">c2</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627784961"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-special">`</span><a href="TcEvidence.html#WpCompose"><span class="hs-identifier hs-var">WpCompose</span></a><span class="hs-special">`</span><span> </span><a href="#local-1627784962"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-195"></a><span>
</span><a name="line-196"></a><span class="hs-identifier">mkWpFun</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-197"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span>    </span><span class="hs-comment">-- the &quot;from&quot; type of the first wrapper</span><span>
</span><a name="line-198"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span>    </span><span class="hs-comment">-- either type of the second wrapper (used only when the</span><span>
</span><a name="line-199"></a><span>                     </span><span class="hs-comment">-- second wrapper is the identity)</span><span>
</span><a name="line-200"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-201"></a><a name="mkWpFun"><a href="TcEvidence.html#mkWpFun"><span class="hs-identifier">mkWpFun</span></a></a><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>       </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>       </span><span class="hs-identifier">_</span><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>
</span><a name="line-202"></a><span class="hs-identifier">mkWpFun</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>       </span><span class="hs-special">(</span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><a name="local-1627784963"><a href="#local-1627784963"><span class="hs-identifier">co2</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1627784964"><a href="#local-1627784964"><span class="hs-identifier">t1</span></a></a><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcFunCo"><span class="hs-identifier hs-var">mkTcFunCo</span></a><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcRepReflCo"><span class="hs-identifier hs-var">mkTcRepReflCo</span></a><span> </span><a href="#local-1627784964"><span class="hs-identifier hs-var">t1</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627784963"><span class="hs-identifier hs-var">co2</span></a><span class="hs-special">)</span><span>
</span><a name="line-203"></a><span class="hs-identifier">mkWpFun</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><a name="local-1627784965"><a href="#local-1627784965"><span class="hs-identifier">co1</span></a></a><span class="hs-special">)</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>       </span><span class="hs-identifier">_</span><span>  </span><a name="local-1627784966"><a href="#local-1627784966"><span class="hs-identifier">t2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcFunCo"><span class="hs-identifier hs-var">mkTcFunCo</span></a><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcSymCo"><span class="hs-identifier hs-var">mkTcSymCo</span></a><span> </span><a href="#local-1627784965"><span class="hs-identifier hs-var">co1</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcRepReflCo"><span class="hs-identifier hs-var">mkTcRepReflCo</span></a><span> </span><a href="#local-1627784966"><span class="hs-identifier hs-var">t2</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-204"></a><span class="hs-identifier">mkWpFun</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><a name="local-1627784967"><a href="#local-1627784967"><span class="hs-identifier">co1</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><a name="local-1627784968"><a href="#local-1627784968"><span class="hs-identifier">co2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcFunCo"><span class="hs-identifier hs-var">mkTcFunCo</span></a><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcSymCo"><span class="hs-identifier hs-var">mkTcSymCo</span></a><span> </span><a href="#local-1627784967"><span class="hs-identifier hs-var">co1</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627784968"><span class="hs-identifier hs-var">co2</span></a><span class="hs-special">)</span><span>
</span><a name="line-205"></a><span class="hs-identifier">mkWpFun</span><span> </span><a name="local-1627784969"><a href="#local-1627784969"><span class="hs-identifier">co1</span></a></a><span>          </span><a name="local-1627784970"><a href="#local-1627784970"><span class="hs-identifier">co2</span></a></a><span>          </span><a name="local-1627784971"><a href="#local-1627784971"><span class="hs-identifier">t1</span></a></a><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a><span> </span><a href="#local-1627784969"><span class="hs-identifier hs-var">co1</span></a><span> </span><a href="#local-1627784970"><span class="hs-identifier hs-var">co2</span></a><span> </span><a href="#local-1627784971"><span class="hs-identifier hs-var">t1</span></a><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span class="hs-comment">-- | @mkWpFuns [(ty1, wrap1), (ty2, wrap2)] ty_res wrap_res@,</span><span>
</span><a name="line-208"></a><span class="hs-comment">-- where @wrap1 :: ty1 &quot;-&gt;&quot; ty1'@ and @wrap2 :: ty2 &quot;-&gt;&quot; ty2'@,</span><span>
</span><a name="line-209"></a><span class="hs-comment">-- @wrap3 :: ty3 &quot;-&gt;&quot; ty3'@ and @ty_res@ is /either/ @ty3@ or @ty3'@,</span><span>
</span><a name="line-210"></a><span class="hs-comment">-- gives a wrapper @(ty1' -&gt; ty2' -&gt; ty3) &quot;-&gt;&quot; (ty1 -&gt; ty2 -&gt; ty3')@.</span><span>
</span><a name="line-211"></a><span class="hs-comment">-- Notice that the result wrapper goes the other way round to all</span><span>
</span><a name="line-212"></a><span class="hs-comment">-- the others. This is a result of sub-typing contravariance.</span><span>
</span><a name="line-213"></a><span class="hs-identifier">mkWpFuns</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-214"></a><a name="mkWpFuns"><a href="TcEvidence.html#mkWpFuns"><span class="hs-identifier">mkWpFuns</span></a></a><span> </span><a name="local-1627784972"><a href="#local-1627784972"><span class="hs-identifier">args</span></a></a><span> </span><a name="local-1627784973"><a href="#local-1627784973"><span class="hs-identifier">res_ty</span></a></a><span> </span><a name="local-1627784974"><a href="#local-1627784974"><span class="hs-identifier">res_wrap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-1627784975"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1627784972"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-1627784973"><span class="hs-identifier hs-var">res_ty</span></a><span> </span><a href="#local-1627784974"><span class="hs-identifier hs-var">res_wrap</span></a><span>
</span><a name="line-215"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-216"></a><span>    </span><a name="local-1627784975"><a href="#local-1627784975"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-1627784976"><a href="#local-1627784976"><span class="hs-identifier">res_ty</span></a></a><span> </span><a name="local-1627784977"><a href="#local-1627784977"><span class="hs-identifier">res_wrap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-1627784976"><span class="hs-identifier hs-var">res_ty</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627784977"><span class="hs-identifier hs-var">res_wrap</span></a><span class="hs-special">)</span><span>
</span><a name="line-217"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a name="local-1627784978"><a href="#local-1627784978"><span class="hs-identifier">arg_ty</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1627784979"><a href="#local-1627784979"><span class="hs-identifier">arg_wrap</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">:</span><span> </span><a name="local-1627784980"><a href="#local-1627784980"><span class="hs-identifier">args</span></a></a><span class="hs-special">)</span><span> </span><a name="local-1627784981"><a href="#local-1627784981"><span class="hs-identifier">res_ty</span></a></a><span> </span><a name="local-1627784982"><a href="#local-1627784982"><span class="hs-identifier">res_wrap</span></a></a><span>
</span><a name="line-218"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-1627784983"><a href="#local-1627784983"><span class="hs-identifier">tail_ty</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1627784984"><a href="#local-1627784984"><span class="hs-identifier">tail_wrap</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627784975"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-1627784980"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-1627784981"><span class="hs-identifier hs-var">res_ty</span></a><span> </span><a href="#local-1627784982"><span class="hs-identifier hs-var">res_wrap</span></a><span> </span><span class="hs-keyword">in</span><span>
</span><a name="line-219"></a><span>        </span><span class="hs-special">(</span><a href="#local-1627784978"><span class="hs-identifier hs-var">arg_ty</span></a><span> </span><span class="hs-special">`</span><a href="TyCoRep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a><span class="hs-special">`</span><span> </span><a href="#local-1627784983"><span class="hs-identifier hs-var">tail_ty</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#mkWpFun"><span class="hs-identifier hs-var">mkWpFun</span></a><span> </span><a href="#local-1627784979"><span class="hs-identifier hs-var">arg_wrap</span></a><span> </span><a href="#local-1627784984"><span class="hs-identifier hs-var">tail_wrap</span></a><span> </span><a href="#local-1627784978"><span class="hs-identifier hs-var">arg_ty</span></a><span> </span><a href="#local-1627784983"><span class="hs-identifier hs-var">tail_ty</span></a><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-identifier">mkWpCastR</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-222"></a><a name="mkWpCastR"><a href="TcEvidence.html#mkWpCastR"><span class="hs-identifier">mkWpCastR</span></a></a><span> </span><a name="local-1627784985"><a href="#local-1627784985"><span class="hs-identifier">co</span></a></a><span>
</span><a name="line-223"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="TcEvidence.html#isTcReflCo"><span class="hs-identifier hs-var">isTcReflCo</span></a><span> </span><a href="#local-1627784985"><span class="hs-identifier hs-var">co</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>
</span><a name="line-224"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span class="hs-identifier">tcCoercionRole</span><span> </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-identifier hs-var">co</span></a><span> </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-operator hs-var">==</span></a><span> </span><span class="hs-identifier">Representational</span><span class="hs-special">,</span><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">co</span></a><span class="hs-special">)</span><span>
</span><a name="line-225"></a><span>                    </span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><a href="#local-1627784985"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-226"></a><span>
</span><a name="line-227"></a><span class="hs-identifier">mkWpCastN</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-228"></a><a name="mkWpCastN"><a href="TcEvidence.html#mkWpCastN"><span class="hs-identifier">mkWpCastN</span></a></a><span> </span><a name="local-1627784986"><a href="#local-1627784986"><span class="hs-identifier">co</span></a></a><span>
</span><a name="line-229"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="TcEvidence.html#isTcReflCo"><span class="hs-identifier hs-var">isTcReflCo</span></a><span> </span><a href="#local-1627784986"><span class="hs-identifier hs-var">co</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>
</span><a name="line-230"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span class="hs-identifier">tcCoercionRole</span><span> </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-identifier hs-var">co</span></a><span> </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-operator hs-var">==</span></a><span> </span><span class="hs-identifier">Nominal</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><a href="CoAxiom.html#Nominal"><span class="hs-identifier hs-var">co</span></a><span class="hs-special">)</span><span>
</span><a name="line-231"></a><span>                    </span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#mkTcSubCo"><span class="hs-identifier hs-var">mkTcSubCo</span></a><span> </span><a href="#local-1627784986"><span class="hs-identifier hs-var">co</span></a><span class="hs-special">)</span><span>
</span><a name="line-232"></a><span>    </span><span class="hs-comment">-- The mkTcSubCo converts Nominal to Representational</span><span>
</span><a name="line-233"></a><span>
</span><a name="line-234"></a><span class="hs-identifier">mkWpTyApps</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-235"></a><a name="mkWpTyApps"><a href="TcEvidence.html#mkWpTyApps"><span class="hs-identifier">mkWpTyApps</span></a></a><span> </span><a name="local-1627784987"><a href="#local-1627784987"><span class="hs-identifier">tys</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#mk_co_app_fn"><span class="hs-identifier hs-var">mk_co_app_fn</span></a><span> </span><a href="TcEvidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a><span> </span><a href="#local-1627784987"><span class="hs-identifier hs-var">tys</span></a><span>
</span><a name="line-236"></a><span>
</span><a name="line-237"></a><span class="hs-identifier">mkWpEvApps</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-238"></a><a name="mkWpEvApps"><a href="TcEvidence.html#mkWpEvApps"><span class="hs-identifier">mkWpEvApps</span></a></a><span> </span><a name="local-1627784988"><a href="#local-1627784988"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#mk_co_app_fn"><span class="hs-identifier hs-var">mk_co_app_fn</span></a><span> </span><a href="TcEvidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a><span> </span><a href="#local-1627784988"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-239"></a><span>
</span><a name="line-240"></a><span class="hs-identifier">mkWpEvVarApps</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-241"></a><a name="mkWpEvVarApps"><a href="TcEvidence.html#mkWpEvVarApps"><span class="hs-identifier">mkWpEvVarApps</span></a></a><span> </span><a name="local-1627784989"><a href="#local-1627784989"><span class="hs-identifier">vs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#mk_co_app_fn"><span class="hs-identifier hs-var">mk_co_app_fn</span></a><span> </span><a href="TcEvidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="TcEvidence.html#EvId"><span class="hs-identifier hs-var">EvId</span></a><span> </span><a href="#local-1627784989"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">)</span><span>
</span><a name="line-242"></a><span>
</span><a name="line-243"></a><span class="hs-identifier">mkWpTyLams</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-244"></a><a name="mkWpTyLams"><a href="TcEvidence.html#mkWpTyLams"><span class="hs-identifier">mkWpTyLams</span></a></a><span> </span><a name="local-1627784990"><a href="#local-1627784990"><span class="hs-identifier">ids</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#mk_co_lam_fn"><span class="hs-identifier hs-var">mk_co_lam_fn</span></a><span> </span><a href="TcEvidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a><span> </span><a href="#local-1627784990"><span class="hs-identifier hs-var">ids</span></a><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span class="hs-identifier">mkWpLams</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-247"></a><a name="mkWpLams"><a href="TcEvidence.html#mkWpLams"><span class="hs-identifier">mkWpLams</span></a></a><span> </span><a name="local-1627784991"><a href="#local-1627784991"><span class="hs-identifier">ids</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#mk_co_lam_fn"><span class="hs-identifier hs-var">mk_co_lam_fn</span></a><span> </span><a href="TcEvidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a><span> </span><a href="#local-1627784991"><span class="hs-identifier hs-var">ids</span></a><span>
</span><a name="line-248"></a><span>
</span><a name="line-249"></a><span class="hs-identifier">mkWpLet</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-250"></a><span class="hs-comment">-- This no-op is a quite a common case</span><span>
</span><a name="line-251"></a><a name="mkWpLet"><a href="TcEvidence.html#mkWpLet"><span class="hs-identifier">mkWpLet</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a><span> </span><a name="local-1627784992"><a href="#local-1627784992"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a href="Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a><span> </span><a href="#local-1627784992"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>
</span><a name="line-252"></a><span class="hs-identifier">mkWpLet</span><span> </span><a name="local-1627784993"><a href="#local-1627784993"><span class="hs-identifier">ev_binds</span></a></a><span>                   </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a><span> </span><a href="#local-1627784993"><span class="hs-identifier hs-var">ev_binds</span></a><span>
</span><a name="line-253"></a><span>
</span><a name="line-254"></a><span class="hs-identifier">mk_co_lam_fn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-1627784957"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-1627784957"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-255"></a><a name="mk_co_lam_fn"><a href="TcEvidence.html#mk_co_lam_fn"><span class="hs-identifier">mk_co_lam_fn</span></a></a><span> </span><a name="local-1627784994"><a href="#local-1627784994"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-1627784996"><a href="#local-1627784996"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-1627784997"><a href="#local-1627784997"><span class="hs-identifier">wrap</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627784994"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-1627784996"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="TcEvidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a><span> </span><a href="#local-1627784997"><span class="hs-identifier hs-var">wrap</span></a><span class="hs-special">)</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-256"></a><span>
</span><a name="line-257"></a><span class="hs-identifier">mk_co_app_fn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-1627784956"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-1627784956"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-258"></a><span class="hs-comment">-- For applications, the *first* argument must</span><span>
</span><a name="line-259"></a><span class="hs-comment">-- come *last* in the composition sequence</span><span>
</span><a name="line-260"></a><a name="mk_co_app_fn"><a href="TcEvidence.html#mk_co_app_fn"><span class="hs-identifier">mk_co_app_fn</span></a></a><span> </span><a name="local-1627784998"><a href="#local-1627784998"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-1627785000"><a href="#local-1627785000"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-1627785001"><a href="#local-1627785001"><span class="hs-identifier">wrap</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627785001"><span class="hs-identifier hs-var">wrap</span></a><span> </span><a href="TcEvidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a><span> </span><a href="#local-1627784998"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-1627785000"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-261"></a><span>
</span><a name="line-262"></a><span class="hs-identifier">idHsWrapper</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span>
</span><a name="line-263"></a><a name="idHsWrapper"><a href="TcEvidence.html#idHsWrapper"><span class="hs-identifier">idHsWrapper</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>
</span><a name="line-264"></a><span>
</span><a name="line-265"></a><span class="hs-identifier">isIdHsWrapper</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-266"></a><a name="isIdHsWrapper"><a href="TcEvidence.html#isIdHsWrapper"><span class="hs-identifier">isIdHsWrapper</span></a></a><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-267"></a><span class="hs-identifier">isIdHsWrapper</span><span> </span><span class="hs-identifier">_</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-268"></a><span>
</span><a name="line-269"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                  Evidence bindings
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-276"></a><span>
</span><a name="line-277"></a><span class="hs-keyword">data</span><span> </span><a name="TcEvBinds"><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier">TcEvBinds</span></a></a><span>
</span><a name="line-278"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="TcEvBinds"><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier">TcEvBinds</span></a></a><span>           </span><span class="hs-comment">-- Mutable evidence bindings</span><span>
</span><a name="line-279"></a><span>       </span><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a><span>       </span><span class="hs-comment">-- Mutable because they are updated &quot;later&quot;</span><span>
</span><a name="line-280"></a><span>                        </span><span class="hs-comment">--    when an implication constraint is solved</span><span>
</span><a name="line-281"></a><span>
</span><a name="line-282"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvBinds"><a href="TcEvidence.html#EvBinds"><span class="hs-identifier">EvBinds</span></a></a><span>             </span><span class="hs-comment">-- Immutable after zonking</span><span>
</span><a name="line-283"></a><span>       </span><span class="hs-special">(</span><a href="Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span class="hs-special">)</span><span>
</span><a name="line-284"></a><span>
</span><a name="line-285"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Typeable</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-286"></a><span>
</span><a name="line-287"></a><span class="hs-keyword">data</span><span> </span><a name="EvBindsVar"><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier">EvBindsVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="EvBindsVar"><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier">EvBindsVar</span></a></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span class="hs-special">)</span><span> </span><a href="Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a><span>
</span><a name="line-288"></a><span>     </span><span class="hs-comment">-- The Unique is for debug printing only</span><span>
</span><a name="line-289"></a><span>
</span><a name="line-290"></a><span class="hs-keyword">instance</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-291"></a><span>  </span><span class="hs-comment">-- Placeholder; we can't travers into TcEvBinds</span><span>
</span><a name="line-292"></a><span>  </span><a name="local-1912605825"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#toConstr"><span class="hs-identifier">toConstr</span></a></a><span> </span><span class="hs-identifier">_</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Util.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a><span> </span><span class="hs-string">&quot;TcEvBinds&quot;</span><span>
</span><a name="line-293"></a><span>  </span><a name="local-1912605826"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#gunfold"><span class="hs-identifier">gunfold</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a><span> </span><span class="hs-string">&quot;gunfold&quot;</span><span>
</span><a name="line-294"></a><span>  </span><a name="local-1912605824"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#dataTypeOf"><span class="hs-identifier">dataTypeOf</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#mkNoRepType"><span class="hs-identifier hs-var">Data</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">mkNoRepType</span></a><span> </span><span class="hs-string">&quot;TcEvBinds&quot;</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-297"></a><span class="hs-keyword">newtype</span><span> </span><a name="EvBindMap"><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier">EvBindMap</span></a></a><span>
</span><a name="line-298"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EvBindMap"><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier">EvBindMap</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-299"></a><span>       </span><a name="ev_bind_varenv"><a href="TcEvidence.html#ev_bind_varenv"><span class="hs-identifier">ev_bind_varenv</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="VarEnv.html#DVarEnv"><span class="hs-identifier hs-type">DVarEnv</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span>
</span><a name="line-300"></a><span>    </span><span class="hs-special">}</span><span>       </span><span class="hs-comment">-- Map from evidence variables to evidence terms</span><span>
</span><a name="line-301"></a><span>            </span><span class="hs-comment">-- We use @DVarEnv@ here to get deterministic ordering when we</span><span>
</span><a name="line-302"></a><span>            </span><span class="hs-comment">-- turn it into a Bag.</span><span>
</span><a name="line-303"></a><span>            </span><span class="hs-comment">-- If we don't do that, when we generate let bindings for</span><span>
</span><a name="line-304"></a><span>            </span><span class="hs-comment">-- dictionaries in dsTcEvBinds they will be generated in random</span><span>
</span><a name="line-305"></a><span>            </span><span class="hs-comment">-- order.</span><span>
</span><a name="line-306"></a><span>            </span><span class="hs-comment">--</span><span>
</span><a name="line-307"></a><span>            </span><span class="hs-comment">-- For example:</span><span>
</span><a name="line-308"></a><span>            </span><span class="hs-comment">--</span><span>
</span><a name="line-309"></a><span>            </span><span class="hs-comment">-- let $dEq = GHC.Classes.$fEqInt in</span><span>
</span><a name="line-310"></a><span>            </span><span class="hs-comment">-- let $$dNum = GHC.Num.$fNumInt in ...</span><span>
</span><a name="line-311"></a><span>            </span><span class="hs-comment">--</span><span>
</span><a name="line-312"></a><span>            </span><span class="hs-comment">-- vs</span><span>
</span><a name="line-313"></a><span>            </span><span class="hs-comment">--</span><span>
</span><a name="line-314"></a><span>            </span><span class="hs-comment">-- let $dNum = GHC.Num.$fNumInt in</span><span>
</span><a name="line-315"></a><span>            </span><span class="hs-comment">-- let $dEq = GHC.Classes.$fEqInt in ...</span><span>
</span><a name="line-316"></a><span>            </span><span class="hs-comment">--</span><span>
</span><a name="line-317"></a><span>            </span><span class="hs-comment">-- See Note [Deterministic UniqFM] in UniqDFM for explanation why</span><span>
</span><a name="line-318"></a><span>            </span><span class="hs-comment">-- @UniqFM@ can lead to nondeterministic order.</span><span>
</span><a name="line-319"></a><span>
</span><a name="line-320"></a><span class="hs-identifier">emptyEvBindMap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span>
</span><a name="line-321"></a><a name="emptyEvBindMap"><a href="TcEvidence.html#emptyEvBindMap"><span class="hs-identifier">emptyEvBindMap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-var">EvBindMap</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ev_bind_varenv</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarEnv.html#emptyDVarEnv"><span class="hs-identifier hs-var">emptyDVarEnv</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-322"></a><span>
</span><a name="line-323"></a><span class="hs-identifier">extendEvBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span>
</span><a name="line-324"></a><a name="extendEvBinds"><a href="TcEvidence.html#extendEvBinds"><span class="hs-identifier">extendEvBinds</span></a></a><span> </span><a name="local-1627785002"><a href="#local-1627785002"><span class="hs-identifier">bs</span></a></a><span> </span><a name="local-1627785003"><a href="#local-1627785003"><span class="hs-identifier">ev_bind</span></a></a><span>
</span><a name="line-325"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-var">EvBindMap</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ev_bind_varenv</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarEnv.html#extendDVarEnv"><span class="hs-identifier hs-var">extendDVarEnv</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">ev_bind_varenv</span><span> </span><a href="#local-1627785002"><span class="hs-identifier hs-var">bs</span></a><span class="hs-special">)</span><span>
</span><a name="line-326"></a><span>                                               </span><span class="hs-special">(</span><span class="hs-identifier">eb_lhs</span><span> </span><a href="#local-1627785003"><span class="hs-identifier hs-var">ev_bind</span></a><span class="hs-special">)</span><span>
</span><a name="line-327"></a><span>                                               </span><a href="#local-1627785003"><span class="hs-identifier hs-var">ev_bind</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-328"></a><span>
</span><a name="line-329"></a><span class="hs-identifier">lookupEvBind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span>
</span><a name="line-330"></a><a name="lookupEvBind"><a href="TcEvidence.html#lookupEvBind"><span class="hs-identifier">lookupEvBind</span></a></a><span> </span><a name="local-1627785004"><a href="#local-1627785004"><span class="hs-identifier">bs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarEnv.html#lookupDVarEnv"><span class="hs-identifier hs-var">lookupDVarEnv</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">ev_bind_varenv</span><span> </span><a href="#local-1627785004"><span class="hs-identifier hs-var">bs</span></a><span class="hs-special">)</span><span>
</span><a name="line-331"></a><span>
</span><a name="line-332"></a><span class="hs-identifier">evBindMapBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span>
</span><a name="line-333"></a><a name="evBindMapBinds"><a href="TcEvidence.html#evBindMapBinds"><span class="hs-identifier">evBindMapBinds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#foldEvBindMap"><span class="hs-identifier hs-var">foldEvBindMap</span></a><span> </span><a href="Bag.html#consBag"><span class="hs-identifier hs-var">consBag</span></a><span> </span><a href="Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a><span>
</span><a name="line-334"></a><span>
</span><a name="line-335"></a><span class="hs-identifier">foldEvBindMap</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627784955"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627784955"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627784955"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627784955"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-336"></a><a name="foldEvBindMap"><a href="TcEvidence.html#foldEvBindMap"><span class="hs-identifier">foldEvBindMap</span></a></a><span> </span><a name="local-1627785005"><a href="#local-1627785005"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-1627785006"><a href="#local-1627785006"><span class="hs-identifier">z</span></a></a><span> </span><a name="local-1627785007"><a href="#local-1627785007"><span class="hs-identifier">bs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarEnv.html#foldDVarEnv"><span class="hs-identifier hs-var">foldDVarEnv</span></a><span> </span><a href="#local-1627785005"><span class="hs-identifier hs-var">k</span></a><span> </span><a href="#local-1627785006"><span class="hs-identifier hs-var">z</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">ev_bind_varenv</span><span> </span><a href="#local-1627785007"><span class="hs-identifier hs-var">bs</span></a><span class="hs-special">)</span><span>
</span><a name="line-337"></a><span>
</span><a name="line-338"></a><span class="hs-comment">-----------------</span><span>
</span><a name="line-339"></a><span class="hs-comment">-- All evidence is bound by EvBinds; no side effects</span><span>
</span><a name="line-340"></a><span class="hs-keyword">data</span><span> </span><a name="EvBind"><a href="TcEvidence.html#EvBind"><span class="hs-identifier">EvBind</span></a></a><span>
</span><a name="line-341"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EvBind"><a href="TcEvidence.html#EvBind"><span class="hs-identifier">EvBind</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="eb_lhs"><a href="TcEvidence.html#eb_lhs"><span class="hs-identifier">eb_lhs</span></a></a><span>      </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span>
</span><a name="line-342"></a><span>           </span><span class="hs-special">,</span><span> </span><a name="eb_rhs"><a href="TcEvidence.html#eb_rhs"><span class="hs-identifier">eb_rhs</span></a></a><span>      </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span>
</span><a name="line-343"></a><span>           </span><span class="hs-special">,</span><span> </span><a name="eb_is_given"><a href="TcEvidence.html#eb_is_given"><span class="hs-identifier">eb_is_given</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>  </span><span class="hs-comment">-- True &lt;=&gt; given</span><span>
</span><a name="line-344"></a><span>                 </span><span class="hs-comment">-- See Note [Tracking redundant constraints] in TcSimplify</span><span>
</span><a name="line-345"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-346"></a><span>
</span><a name="line-347"></a><span class="hs-identifier">evBindVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span>
</span><a name="line-348"></a><a name="evBindVar"><a href="TcEvidence.html#evBindVar"><span class="hs-identifier">evBindVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">eb_lhs</span><span>
</span><a name="line-349"></a><span>
</span><a name="line-350"></a><span class="hs-identifier">mkWantedEvBind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span>
</span><a name="line-351"></a><a name="mkWantedEvBind"><a href="TcEvidence.html#mkWantedEvBind"><span class="hs-identifier">mkWantedEvBind</span></a></a><span> </span><a name="local-1627785008"><a href="#local-1627785008"><span class="hs-identifier">ev</span></a></a><span> </span><a name="local-1627785009"><a href="#local-1627785009"><span class="hs-identifier">tm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-var">EvBind</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">eb_is_given</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_lhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785008"><span class="hs-identifier hs-var">ev</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_rhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785009"><span class="hs-identifier hs-var">tm</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-352"></a><span>
</span><a name="line-353"></a><span>
</span><a name="line-354"></a><span class="hs-identifier">mkGivenEvBind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span>
</span><a name="line-355"></a><a name="mkGivenEvBind"><a href="TcEvidence.html#mkGivenEvBind"><span class="hs-identifier">mkGivenEvBind</span></a></a><span> </span><a name="local-1627785010"><a href="#local-1627785010"><span class="hs-identifier">ev</span></a></a><span> </span><a name="local-1627785011"><a href="#local-1627785011"><span class="hs-identifier">tm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-var">EvBind</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">eb_is_given</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_lhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785010"><span class="hs-identifier hs-var">ev</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_rhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785011"><span class="hs-identifier hs-var">tm</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-356"></a><span>
</span><a name="line-357"></a><span class="hs-keyword">data</span><span> </span><a name="EvTerm"><a href="TcEvidence.html#EvTerm"><span class="hs-identifier">EvTerm</span></a></a><span>
</span><a name="line-358"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EvId"><a href="TcEvidence.html#EvId"><span class="hs-identifier">EvId</span></a></a><span> </span><a href="Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a><span>                    </span><span class="hs-comment">-- Any sort of evidence Id, including coercions</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvCoercion"><a href="TcEvidence.html#EvCoercion"><span class="hs-identifier">EvCoercion</span></a></a><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>        </span><span class="hs-comment">-- coercion bindings</span><span>
</span><a name="line-361"></a><span>                                 </span><span class="hs-comment">-- See Note [Coercion evidence terms]</span><span>
</span><a name="line-362"></a><span>
</span><a name="line-363"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvCast"><a href="TcEvidence.html#EvCast"><span class="hs-identifier">EvCast</span></a></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><a href="TcEvidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a><span>    </span><span class="hs-comment">-- d |&gt; co</span><span>
</span><a name="line-364"></a><span>
</span><a name="line-365"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvDFunApp"><a href="TcEvidence.html#EvDFunApp"><span class="hs-identifier">EvDFunApp</span></a></a><span> </span><a href="Var.html#DFunId"><span class="hs-identifier hs-type">DFunId</span></a><span>             </span><span class="hs-comment">-- Dictionary instance application</span><span>
</span><a name="line-366"></a><span>       </span><span class="hs-special">[</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">]</span><span>
</span><a name="line-367"></a><span>
</span><a name="line-368"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvDelayedError"><a href="TcEvidence.html#EvDelayedError"><span class="hs-identifier">EvDelayedError</span></a></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span>  </span><span class="hs-comment">-- Used with Opt_DeferTypeErrors</span><span>
</span><a name="line-369"></a><span>                               </span><span class="hs-comment">-- See Note [Deferring coercion errors to runtime]</span><span>
</span><a name="line-370"></a><span>                               </span><span class="hs-comment">-- in TcSimplify</span><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvSuperClass"><a href="TcEvidence.html#EvSuperClass"><span class="hs-identifier">EvSuperClass</span></a></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span>      </span><span class="hs-comment">-- n'th superclass. Used for both equalities and</span><span>
</span><a name="line-373"></a><span>                                 </span><span class="hs-comment">-- dictionaries, even though the former have no</span><span>
</span><a name="line-374"></a><span>                                 </span><span class="hs-comment">-- selector Id.  We count up from _0_</span><span>
</span><a name="line-375"></a><span>
</span><a name="line-376"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvLit"><a href="TcEvidence.html#EvLit"><span class="hs-identifier">EvLit</span></a></a><span> </span><a href="TcEvidence.html#EvLit"><span class="hs-identifier hs-type">EvLit</span></a><span>       </span><span class="hs-comment">-- Dictionary for KnownNat and KnownSymbol classes.</span><span>
</span><a name="line-377"></a><span>                      </span><span class="hs-comment">-- Note [KnownNat &amp; KnownSymbol and EvLit]</span><span>
</span><a name="line-378"></a><span>
</span><a name="line-379"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvCallStack"><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier">EvCallStack</span></a></a><span> </span><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier hs-type">EvCallStack</span></a><span>      </span><span class="hs-comment">-- Dictionary for CallStack implicit parameters</span><span>
</span><a name="line-380"></a><span>
</span><a name="line-381"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvTypeable"><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier">EvTypeable</span></a></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a><span>   </span><span class="hs-comment">-- Dictionary for (Typeable ty)</span><span>
</span><a name="line-382"></a><span>
</span><a name="line-383"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Typeable</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-384"></a><span>
</span><a name="line-385"></a><span>
</span><a name="line-386"></a><span class="hs-comment">-- | Instructions on how to make a 'Typeable' dictionary.</span><span>
</span><a name="line-387"></a><span class="hs-comment">-- See Note [Typeable evidence terms]</span><span>
</span><a name="line-388"></a><span class="hs-keyword">data</span><span> </span><a name="EvTypeable"><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier">EvTypeable</span></a></a><span>
</span><a name="line-389"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EvTypeableTyCon"><a href="TcEvidence.html#EvTypeableTyCon"><span class="hs-identifier">EvTypeableTyCon</span></a></a><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- ^ Dictionary for @Typeable (T k1..kn)@.</span><span>
</span><a name="line-390"></a><span>                              </span><span class="hs-comment">-- The EvTerms are for the arguments</span><span>
</span><a name="line-391"></a><span>
</span><a name="line-392"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvTypeableTyApp"><a href="TcEvidence.html#EvTypeableTyApp"><span class="hs-identifier">EvTypeableTyApp</span></a></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span>
</span><a name="line-393"></a><span>    </span><span class="hs-comment">-- ^ Dictionary for @Typeable (s t)@,</span><span>
</span><a name="line-394"></a><span>    </span><span class="hs-comment">-- given a dictionaries for @s@ and @t@</span><span>
</span><a name="line-395"></a><span>
</span><a name="line-396"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvTypeableTyLit"><a href="TcEvidence.html#EvTypeableTyLit"><span class="hs-identifier">EvTypeableTyLit</span></a></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span>
</span><a name="line-397"></a><span>    </span><span class="hs-comment">-- ^ Dictionary for a type literal,</span><span>
</span><a name="line-398"></a><span>    </span><span class="hs-comment">-- e.g. @Typeable &quot;foo&quot;@ or @Typeable 3@</span><span>
</span><a name="line-399"></a><span>    </span><span class="hs-comment">-- The 'EvTerm' is evidence of, e.g., @KnownNat 3@</span><span>
</span><a name="line-400"></a><span>    </span><span class="hs-comment">-- (see Trac #10348)</span><span>
</span><a name="line-401"></a><span>
</span><a name="line-402"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Typeable</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-403"></a><span>
</span><a name="line-404"></a><span class="hs-keyword">data</span><span> </span><a name="EvLit"><a href="TcEvidence.html#EvLit"><span class="hs-identifier">EvLit</span></a></a><span>
</span><a name="line-405"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EvNum"><a href="TcEvidence.html#EvNum"><span class="hs-identifier">EvNum</span></a></a><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-406"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvStr"><a href="TcEvidence.html#EvStr"><span class="hs-identifier">EvStr</span></a></a><span> </span><a href="FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a><span>
</span><a name="line-407"></a><span>    </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Typeable</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-408"></a><span>
</span><a name="line-409"></a><span class="hs-comment">-- | Evidence for @CallStack@ implicit parameters.</span><span>
</span><a name="line-410"></a><span class="hs-keyword">data</span><span> </span><a name="EvCallStack"><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier">EvCallStack</span></a></a><span>
</span><a name="line-411"></a><span>  </span><span class="hs-comment">-- See Note [Overview of implicit CallStacks]</span><span>
</span><a name="line-412"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EvCsEmpty"><a href="TcEvidence.html#EvCsEmpty"><span class="hs-identifier">EvCsEmpty</span></a></a><span>
</span><a name="line-413"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EvCsPushCall"><a href="TcEvidence.html#EvCsPushCall"><span class="hs-identifier">EvCsPushCall</span></a></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><a href="SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span>
</span><a name="line-414"></a><span>    </span><span class="hs-comment">-- ^ @EvCsPushCall name loc stk@ represents a call to @name@, occurring at</span><span>
</span><a name="line-415"></a><span>    </span><span class="hs-comment">-- @loc@, in a calling context @stk@.</span><span>
</span><a name="line-416"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span class="hs-special">,</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Typeable</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-417"></a><span>
</span><a name="line-418"></a><span class="hs-comment">{-
Note [Typeable evidence terms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The EvTypeable data type looks isomorphic to Type, but the EvTerms
inside can be EvIds.  Eg
    f :: forall a. Typeable a =&gt; a -&gt; TypeRep
    f x = typeRep (undefined :: Proxy [a])
Here for the (Typeable [a]) dictionary passed to typeRep we make
evidence
    dl :: Typeable [a] = EvTypeable [a]
                            (EvTypeableTyApp (EvTypeableTyCon []) (EvId d))
where
    d :: Typable a
is the lambda-bound dictionary passed into f.

Note [Coercion evidence terms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A &quot;coercion evidence term&quot; takes one of these forms
   co_tm ::= EvId v           where v :: t1 ~# t2
           | EvCoercion co
           | EvCast co_tm co

We do quite often need to get a TcCoercion from an EvTerm; see
'evTermCoercion'.

INVARIANT: The evidence for any constraint with type (t1 ~# t2) is
a coercion evidence term.  Consider for example
    [G] d :: F Int a
If we have
    ax7 a :: F Int a ~ (a ~ Bool)
then we do NOT generate the constraint
    [G] (d |&gt; ax7 a) :: a ~ Bool
because that does not satisfy the invariant (d is not a coercion variable).
Instead we make a binding
    g1 :: a~Bool = g |&gt; ax7 a
and the constraint
    [G] g1 :: a~Bool
See Trac [7238] and Note [Bind new Givens immediately] in TcRnTypes

Note [EvBinds/EvTerm]
~~~~~~~~~~~~~~~~~~~~~
How evidence is created and updated. Bindings for dictionaries,
and coercions and implicit parameters are carried around in TcEvBinds
which during constraint generation and simplification is always of the
form (TcEvBinds ref). After constraint simplification is finished it
will be transformed to t an (EvBinds ev_bag).

Evidence for coercions *SHOULD* be filled in using the TcEvBinds
However, all EvVars that correspond to *wanted* coercion terms in
an EvBind must be mutable variables so that they can be readily
inlined (by zonking) after constraint simplification is finished.

Conclusion: a new wanted coercion variable should be made mutable.
[Notice though that evidence variables that bind coercion terms
 from super classes will be &quot;given&quot; and hence rigid]


Note [KnownNat &amp; KnownSymbol and EvLit]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A part of the type-level literals implementation are the classes
&quot;KnownNat&quot; and &quot;KnownSymbol&quot;, which provide a &quot;smart&quot; constructor for
defining singleton values.  Here is the key stuff from GHC.TypeLits

  class KnownNat (n :: Nat) where
    natSing :: SNat n

  newtype SNat (n :: Nat) = SNat Integer

Conceptually, this class has infinitely many instances:

  instance KnownNat 0       where natSing = SNat 0
  instance KnownNat 1       where natSing = SNat 1
  instance KnownNat 2       where natSing = SNat 2
  ...

In practice, we solve `KnownNat` predicates in the type-checker
(see typecheck/TcInteract.hs) because we can't have infinately many instances.
The evidence (aka &quot;dictionary&quot;) for `KnownNat` is of the form `EvLit (EvNum n)`.

We make the following assumptions about dictionaries in GHC:
  1. The &quot;dictionary&quot; for classes with a single method---like `KnownNat`---is
     a newtype for the type of the method, so using a evidence amounts
     to a coercion, and
  2. Newtypes use the same representation as their definition types.

So, the evidence for `KnownNat` is just a value of the representation type,
wrapped in two newtype constructors: one to make it into a `SNat` value,
and another to make it into a `KnownNat` dictionary.

Also note that `natSing` and `SNat` are never actually exposed from the
library---they are just an implementation detail.  Instead, users see
a more convenient function, defined in terms of `natSing`:

  natVal :: KnownNat n =&gt; proxy n -&gt; Integer

The reason we don't use this directly in the class is that it is simpler
and more efficient to pass around an integer rather than an entier function,
especially when the `KnowNat` evidence is packaged up in an existential.

The story for kind `Symbol` is analogous:
  * class KnownSymbol
  * newtype SSymbol
  * Evidence: EvLit (EvStr n)


Note [Overview of implicit CallStacks]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(See https://ghc.haskell.org/trac/ghc/wiki/ExplicitCallStack/ImplicitLocations)

The goal of CallStack evidence terms is to reify locations
in the program source as runtime values, without any support
from the RTS. We accomplish this by assigning a special meaning
to constraints of type GHC.Stack.Types.HasCallStack, an alias

  type HasCallStack = (?callStack :: CallStack)

Implicit parameters of type GHC.Stack.Types.CallStack (the name is not
important) are solved in three steps:

1. Occurrences of CallStack IPs are solved directly from the given IP,
   just like a regular IP. For example, the occurrence of `?stk` in

     error :: (?stk :: CallStack) =&gt; String -&gt; a
     error s = raise (ErrorCall (s ++ prettyCallStack ?stk))

   will be solved for the `?stk` in `error`s context as before.

2. In a function call, instead of simply passing the given IP, we first
   append the current call-site to it. For example, consider a
   call to the callstack-aware `error` above.

     undefined :: (?stk :: CallStack) =&gt; a
     undefined = error &quot;undefined!&quot;

   Here we want to take the given `?stk` and append the current
   call-site, before passing it to `error`. In essence, we want to
   rewrite `error &quot;undefined!&quot;` to

     let ?stk = pushCallStack &lt;error's location&gt; ?stk
     in error &quot;undefined!&quot;

   We achieve this effect by emitting a NEW wanted

     [W] d :: IP &quot;stk&quot; CallStack

   from which we build the evidence term

     EvCsPushCall &quot;error&quot; &lt;error's location&gt; (EvId d)

   that we use to solve the call to `error`. The new wanted `d` will
   then be solved per rule (1), ie as a regular IP.

   (see TcInteract.interactDict)

3. We default any insoluble CallStacks to the empty CallStack. Suppose
   `undefined` did not request a CallStack, ie

     undefinedNoStk :: a
     undefinedNoStk = error &quot;undefined!&quot;

   Under the usual IP rules, the new wanted from rule (2) would be
   insoluble as there's no given IP from which to solve it, so we
   would get an &quot;unbound implicit parameter&quot; error.

   We don't ever want to emit an insoluble CallStack IP, so we add a
   defaulting pass to default any remaining wanted CallStacks to the
   empty CallStack with the evidence term

     EvCsEmpty

   (see TcSimplify.simpl_top and TcSimplify.defaultCallStacks)

This provides a lightweight mechanism for building up call-stacks
explicitly, but is notably limited by the fact that the stack will
stop at the first function whose type does not include a CallStack IP.
For example, using the above definition of `undefined`:

  head :: [a] -&gt; a
  head []    = undefined
  head (x:_) = x

  g = head []

the resulting CallStack will include the call to `undefined` in `head`
and the call to `error` in `undefined`, but *not* the call to `head`
in `g`, because `head` did not explicitly request a CallStack.


Important Details:
- GHC should NEVER report an insoluble CallStack constraint.

- GHC should NEVER infer a CallStack constraint unless one was requested
  with a partial type signature (See TcType.pickQuantifiablePreds).

- A CallStack (defined in GHC.Stack.Types) is a [(String, SrcLoc)],
  where the String is the name of the binder that is used at the
  SrcLoc. SrcLoc is also defined in GHC.Stack.Types and contains the
  package/module/file name, as well as the full source-span. Both
  CallStack and SrcLoc are kept abstract so only GHC can construct new
  values.

- We will automatically solve any wanted CallStack regardless of the
  name of the IP, i.e.

    f = show (?stk :: CallStack)
    g = show (?loc :: CallStack)

  are both valid. However, we will only push new SrcLocs onto existing
  CallStacks when the IP names match, e.g. in

    head :: (?loc :: CallStack) =&gt; [a] -&gt; a
    head [] = error (show (?stk :: CallStack))

  the printed CallStack will NOT include head's call-site. This reflects the
  standard scoping rules of implicit-parameters.

- An EvCallStack term desugars to a CoreExpr of type `IP &quot;some str&quot; CallStack`.
  The desugarer will need to unwrap the IP newtype before pushing a new
  call-site onto a given stack (See DsBinds.dsEvCallStack)

- When we emit a new wanted CallStack from rule (2) we set its origin to
  `IPOccOrigin ip_name` instead of the original `OccurrenceOf func`
  (see TcInteract.interactDict).

  This is a bit shady, but is how we ensure that the new wanted is
  solved like a regular IP.

-}</span><span>
</span><a name="line-646"></a><span>
</span><a name="line-647"></a><span class="hs-identifier">mkEvCast</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span>
</span><a name="line-648"></a><a name="mkEvCast"><a href="TcEvidence.html#mkEvCast"><span class="hs-identifier">mkEvCast</span></a></a><span> </span><a name="local-1627785012"><a href="#local-1627785012"><span class="hs-identifier">ev</span></a></a><span> </span><a name="local-1627785013"><a href="#local-1627785013"><span class="hs-identifier">lco</span></a></a><span>
</span><a name="line-649"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span class="hs-identifier">tcCoercionRole</span><span> </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-identifier hs-var">lco</span></a><span> </span><a href="TcEvidence.html#tcCoercionRole"><span class="hs-operator hs-var">==</span></a><span> </span><span class="hs-identifier">Representational</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">[</span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Coercion of wrong role passed to mkEvCast:&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">ev</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">lco</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-650"></a><span>    </span><a href="TcEvidence.html#isTcReflCo"><span class="hs-identifier hs-var">isTcReflCo</span></a><span> </span><a href="#local-1627785013"><span class="hs-identifier hs-var">lco</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785012"><span class="hs-identifier hs-var">ev</span></a><span>
</span><a name="line-651"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#EvCast"><span class="hs-identifier hs-var">EvCast</span></a><span> </span><a href="#local-1627785012"><span class="hs-identifier hs-var">ev</span></a><span> </span><a href="#local-1627785013"><span class="hs-identifier hs-var">lco</span></a><span>
</span><a name="line-652"></a><span>
</span><a name="line-653"></a><span class="hs-identifier">mkEvScSelectors</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-654"></a><a name="mkEvScSelectors"><a href="TcEvidence.html#mkEvScSelectors"><span class="hs-identifier">mkEvScSelectors</span></a></a><span> </span><a name="local-1627785014"><a href="#local-1627785014"><span class="hs-identifier">ev</span></a></a><span> </span><a name="local-1627785015"><a href="#local-1627785015"><span class="hs-identifier">cls</span></a></a><span> </span><a name="local-1627785016"><a href="#local-1627785016"><span class="hs-identifier">tys</span></a></a><span>
</span><a name="line-655"></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span> </span><a href="#local-1627785017"><span class="hs-identifier hs-var">mk_pr</span></a><span> </span><span class="hs-special">(</span><a href="TcType.html#immSuperClasses"><span class="hs-identifier hs-var">immSuperClasses</span></a><span> </span><a href="#local-1627785015"><span class="hs-identifier hs-var">cls</span></a><span> </span><a href="#local-1627785016"><span class="hs-identifier hs-var">tys</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-number">0</span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><a name="line-656"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-657"></a><span>    </span><a name="local-1627785017"><a href="#local-1627785017"><span class="hs-identifier">mk_pr</span></a></a><span> </span><a name="local-1627785018"><a href="#local-1627785018"><span class="hs-identifier">pred</span></a></a><span> </span><a name="local-1627785019"><a href="#local-1627785019"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-1627785018"><span class="hs-identifier hs-var">pred</span></a><span class="hs-special">,</span><span> </span><a href="TcEvidence.html#EvSuperClass"><span class="hs-identifier hs-var">EvSuperClass</span></a><span> </span><a href="#local-1627785014"><span class="hs-identifier hs-var">ev</span></a><span> </span><a href="#local-1627785019"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-658"></a><span>
</span><a name="line-659"></a><span class="hs-identifier">emptyTcEvBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span>
</span><a name="line-660"></a><a name="emptyTcEvBinds"><a href="TcEvidence.html#emptyTcEvBinds"><span class="hs-identifier">emptyTcEvBinds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a><span> </span><a href="Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a><span>
</span><a name="line-661"></a><span>
</span><a name="line-662"></a><span class="hs-identifier">isEmptyTcEvBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-663"></a><a name="isEmptyTcEvBinds"><a href="TcEvidence.html#isEmptyTcEvBinds"><span class="hs-identifier">isEmptyTcEvBinds</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a><span> </span><a name="local-1627785020"><a href="#local-1627785020"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a><span> </span><a href="#local-1627785020"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-664"></a><span class="hs-identifier">isEmptyTcEvBinds</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-var">TcEvBinds</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a><span> </span><span class="hs-string">&quot;isEmptyTcEvBinds&quot;</span><span>
</span><a name="line-665"></a><span>
</span><a name="line-666"></a><span>
</span><a name="line-667"></a><span class="hs-identifier">evTermCoercion</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a><span>
</span><a name="line-668"></a><span class="hs-comment">-- Applied only to EvTerms of type (s~t)</span><span>
</span><a name="line-669"></a><span class="hs-comment">-- See Note [Coercion evidence terms]</span><span>
</span><a name="line-670"></a><a name="evTermCoercion"><a href="TcEvidence.html#evTermCoercion"><span class="hs-identifier">evTermCoercion</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvId"><span class="hs-identifier hs-var">EvId</span></a><span> </span><a name="local-1627785021"><a href="#local-1627785021"><span class="hs-identifier">v</span></a></a><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a><span> </span><a href="#local-1627785021"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-671"></a><span class="hs-identifier">evTermCoercion</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCoercion"><span class="hs-identifier hs-var">EvCoercion</span></a><span> </span><a name="local-1627785022"><a href="#local-1627785022"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785022"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-672"></a><span class="hs-identifier">evTermCoercion</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCast"><span class="hs-identifier hs-var">EvCast</span></a><span> </span><a name="local-1627785023"><a href="#local-1627785023"><span class="hs-identifier">tm</span></a></a><span> </span><a name="local-1627785024"><a href="#local-1627785024"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkCoCast"><span class="hs-identifier hs-var">mkCoCast</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#evTermCoercion"><span class="hs-identifier hs-var">evTermCoercion</span></a><span> </span><a href="#local-1627785023"><span class="hs-identifier hs-var">tm</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627785024"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-673"></a><span class="hs-identifier">evTermCoercion</span><span> </span><a name="local-1627785025"><a href="#local-1627785025"><span class="hs-identifier">tm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;evTermCoercion&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785025"><span class="hs-identifier hs-var">tm</span></a><span class="hs-special">)</span><span>
</span><a name="line-674"></a><span>
</span><a name="line-675"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="VarSet.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a><span>
</span><a name="line-676"></a><a name="evVarsOfTerm"><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier">evVarsOfTerm</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvId"><span class="hs-identifier hs-var">EvId</span></a><span> </span><a name="local-1627785026"><a href="#local-1627785026"><span class="hs-identifier">v</span></a></a><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#unitVarSet"><span class="hs-identifier hs-var">unitVarSet</span></a><span> </span><a href="#local-1627785026"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-677"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCoercion"><span class="hs-identifier hs-var">EvCoercion</span></a><span> </span><a name="local-1627785027"><a href="#local-1627785027"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="TyCoRep.html#coVarsOfCo"><span class="hs-identifier hs-var">coVarsOfCo</span></a><span> </span><a href="#local-1627785027"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-678"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvDFunApp"><span class="hs-identifier hs-var">EvDFunApp</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1627785028"><a href="#local-1627785028"><span class="hs-identifier">evs</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#mapUnionVarSet"><span class="hs-identifier hs-var">mapUnionVarSet</span></a><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span> </span><a href="#local-1627785028"><span class="hs-identifier hs-var">evs</span></a><span>
</span><a name="line-679"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvSuperClass"><span class="hs-identifier hs-var">EvSuperClass</span></a><span> </span><a name="local-1627785029"><a href="#local-1627785029"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span> </span><a href="#local-1627785029"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-680"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCast"><span class="hs-identifier hs-var">EvCast</span></a><span> </span><a name="local-1627785030"><a href="#local-1627785030"><span class="hs-identifier">tm</span></a></a><span> </span><a name="local-1627785031"><a href="#local-1627785031"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span> </span><a href="#local-1627785030"><span class="hs-identifier hs-var">tm</span></a><span> </span><span class="hs-special">`</span><a href="VarSet.html#unionVarSet"><span class="hs-identifier hs-var">unionVarSet</span></a><span class="hs-special">`</span><span> </span><a href="TyCoRep.html#coVarsOfCo"><span class="hs-identifier hs-var">coVarsOfCo</span></a><span> </span><a href="#local-1627785031"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-681"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvDelayedError"><span class="hs-identifier hs-var">EvDelayedError</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a><span>
</span><a name="line-682"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvLit"><span class="hs-identifier hs-var">EvLit</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a><span>
</span><a name="line-683"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier hs-var">EvCallStack</span></a><span> </span><a name="local-1627785032"><a href="#local-1627785032"><span class="hs-identifier">cs</span></a></a><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#evVarsOfCallStack"><span class="hs-identifier hs-var">evVarsOfCallStack</span></a><span> </span><a href="#local-1627785032"><span class="hs-identifier hs-var">cs</span></a><span>
</span><a name="line-684"></a><span class="hs-identifier">evVarsOfTerm</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1627785033"><a href="#local-1627785033"><span class="hs-identifier">ev</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#evVarsOfTypeable"><span class="hs-identifier hs-var">evVarsOfTypeable</span></a><span> </span><a href="#local-1627785033"><span class="hs-identifier hs-var">ev</span></a><span>
</span><a name="line-685"></a><span>
</span><a name="line-686"></a><span class="hs-identifier">evVarsOfTerms</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="VarSet.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a><span>
</span><a name="line-687"></a><a name="evVarsOfTerms"><a href="TcEvidence.html#evVarsOfTerms"><span class="hs-identifier">evVarsOfTerms</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="VarSet.html#mapUnionVarSet"><span class="hs-identifier hs-var">mapUnionVarSet</span></a><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span>
</span><a name="line-688"></a><span>
</span><a name="line-689"></a><span class="hs-comment">-- | Do SCC analysis on a bag of 'EvBind's.</span><span>
</span><a name="line-690"></a><span class="hs-identifier">sccEvBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="../containers-0.5.7.1/src/%{MODULE/./-}.html#%{NAME}/Data.Graph.html#SCC"><span class="hs-identifier hs-type">SCC</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span class="hs-special">]</span><span>
</span><a name="line-691"></a><a name="sccEvBinds"><a href="TcEvidence.html#sccEvBinds"><span class="hs-identifier">sccEvBinds</span></a></a><span> </span><a name="local-1627785034"><a href="#local-1627785034"><span class="hs-identifier">bs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Digraph.html#stronglyConnCompFromEdgedVertices"><span class="hs-identifier hs-var">stronglyConnCompFromEdgedVertices</span></a><span> </span><a href="#local-1627785035"><span class="hs-identifier hs-var">edges</span></a><span>
</span><a name="line-692"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-693"></a><span>    </span><span class="hs-identifier">edges</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-694"></a><span>    </span><a name="local-1627785035"><a href="#local-1627785035"><span class="hs-identifier">edges</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Bag.html#foldrBag"><span class="hs-identifier hs-var">foldrBag</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a><span> </span><a href="#local-1627785036"><span class="hs-identifier hs-var">mk_node</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-1627785034"><span class="hs-identifier hs-var">bs</span></a><span>
</span><a name="line-695"></a><span>
</span><a name="line-696"></a><span>    </span><span class="hs-identifier">mk_node</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-697"></a><span>    </span><a name="local-1627785036"><a href="#local-1627785036"><span class="hs-identifier">mk_node</span></a></a><span> </span><a name="local-1627785037"><a href="#local-1627785037"><span class="hs-identifier">b</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-var">EvBind</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">eb_lhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627785038"><a href="#local-1627785038"><span class="hs-identifier">var</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_rhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627785039"><a href="#local-1627785039"><span class="hs-identifier">term</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-698"></a><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-1627785037"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627785038"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">,</span><span> </span><a href="VarSet.html#varSetElems"><span class="hs-identifier hs-var">varSetElems</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span> </span><a href="#local-1627785039"><span class="hs-identifier hs-var">term</span></a><span> </span><span class="hs-special">`</span><a href="VarSet.html#unionVarSet"><span class="hs-identifier hs-var">unionVarSet</span></a><span class="hs-special">`</span><span>
</span><a name="line-699"></a><span>                              </span><a href="TyCoRep.html#coVarsOfType"><span class="hs-identifier hs-var">coVarsOfType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">varType</span><span> </span><a href="#local-1627785038"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-700"></a><span>
</span><a name="line-701"></a><span class="hs-identifier">evVarsOfCallStack</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier hs-type">EvCallStack</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="VarSet.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a><span>
</span><a name="line-702"></a><a name="evVarsOfCallStack"><a href="TcEvidence.html#evVarsOfCallStack"><span class="hs-identifier">evVarsOfCallStack</span></a></a><span> </span><a name="local-1627785040"><a href="#local-1627785040"><span class="hs-identifier">cs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1627785040"><span class="hs-identifier hs-var">cs</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-703"></a><span>  </span><a href="TcEvidence.html#EvCsEmpty"><span class="hs-identifier hs-var">EvCsEmpty</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="VarSet.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a><span>
</span><a name="line-704"></a><span>  </span><a href="TcEvidence.html#EvCsPushCall"><span class="hs-identifier hs-var">EvCsPushCall</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1627785041"><a href="#local-1627785041"><span class="hs-identifier">tm</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span> </span><a href="#local-1627785041"><span class="hs-identifier hs-var">tm</span></a><span>
</span><a name="line-705"></a><span>
</span><a name="line-706"></a><span class="hs-identifier">evVarsOfTypeable</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="VarSet.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a><span>
</span><a name="line-707"></a><a name="evVarsOfTypeable"><a href="TcEvidence.html#evVarsOfTypeable"><span class="hs-identifier">evVarsOfTypeable</span></a></a><span> </span><a name="local-1627785042"><a href="#local-1627785042"><span class="hs-identifier">ev</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-708"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-1627785042"><span class="hs-identifier hs-var">ev</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-709"></a><span>    </span><a href="TcEvidence.html#EvTypeableTyCon"><span class="hs-identifier hs-var">EvTypeableTyCon</span></a><span> </span><a name="local-1627785043"><a href="#local-1627785043"><span class="hs-identifier">es</span></a></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#evVarsOfTerms"><span class="hs-identifier hs-var">evVarsOfTerms</span></a><span> </span><a href="#local-1627785043"><span class="hs-identifier hs-var">es</span></a><span>
</span><a name="line-710"></a><span>    </span><a href="TcEvidence.html#EvTypeableTyApp"><span class="hs-identifier hs-var">EvTypeableTyApp</span></a><span> </span><a name="local-1627785044"><a href="#local-1627785044"><span class="hs-identifier">e1</span></a></a><span> </span><a name="local-1627785045"><a href="#local-1627785045"><span class="hs-identifier">e2</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#evVarsOfTerms"><span class="hs-identifier hs-var">evVarsOfTerms</span></a><span> </span><span class="hs-special">[</span><a href="#local-1627785044"><span class="hs-identifier hs-var">e1</span></a><span class="hs-special">,</span><a href="#local-1627785045"><span class="hs-identifier hs-var">e2</span></a><span class="hs-special">]</span><span>
</span><a name="line-711"></a><span>    </span><a href="TcEvidence.html#EvTypeableTyLit"><span class="hs-identifier hs-var">EvTypeableTyLit</span></a><span> </span><a name="local-1627785046"><a href="#local-1627785046"><span class="hs-identifier">e</span></a></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a><span> </span><a href="#local-1627785046"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-712"></a><span>
</span><a name="line-713"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                  Pretty printing
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-720"></a><span>
</span><a name="line-721"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-722"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a name="local-1627785113"><a href="#local-1627785113"><span class="hs-identifier">co_fn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#pprHsWrapper"><span class="hs-identifier hs-var">pprHsWrapper</span></a><span> </span><a href="#local-1627785113"><span class="hs-identifier hs-var">co_fn</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#no_parens"><span class="hs-identifier hs-var">no_parens</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;&lt;&gt;&quot;</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-723"></a><span>
</span><a name="line-724"></a><span class="hs-identifier">pprHsWrapper</span><span> </span><span class="hs-glyph">::</span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-725"></a><span class="hs-comment">-- With -fprint-typechecker-elaboration, print the wrapper</span><span>
</span><a name="line-726"></a><span class="hs-comment">--   otherwise just print what's inside</span><span>
</span><a name="line-727"></a><span class="hs-comment">-- The pp_thing_inside function takes Bool to say whether</span><span>
</span><a name="line-728"></a><span class="hs-comment">--    it's in a position that needs parens for a non-atomic thing</span><span>
</span><a name="line-729"></a><a name="pprHsWrapper"><a href="TcEvidence.html#pprHsWrapper"><span class="hs-identifier">pprHsWrapper</span></a></a><span> </span><a name="local-1627785047"><a href="#local-1627785047"><span class="hs-identifier">wrap</span></a></a><span> </span><a name="local-1627785048"><a href="#local-1627785048"><span class="hs-identifier">pp_thing_inside</span></a></a><span>
</span><a name="line-730"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#sdocWithDynFlags"><span class="hs-identifier hs-var">sdocWithDynFlags</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><span> </span><a name="local-1627785072"><a href="#local-1627785072"><span class="hs-identifier">dflags</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-731"></a><span>    </span><span class="hs-keyword">if</span><span> </span><a href="DynFlags.html#gopt"><span class="hs-identifier hs-var">gopt</span></a><span> </span><a href="DynFlags.html#Opt_PrintTypecheckerElaboration"><span class="hs-identifier hs-var">Opt_PrintTypecheckerElaboration</span></a><span> </span><a href="#local-1627785072"><span class="hs-identifier hs-var">dflags</span></a><span>
</span><a name="line-732"></a><span>    </span><span class="hs-keyword">then</span><span> </span><a href="#local-1627785049"><span class="hs-identifier hs-var">help</span></a><span> </span><a href="#local-1627785048"><span class="hs-identifier hs-var">pp_thing_inside</span></a><span> </span><a href="#local-1627785047"><span class="hs-identifier hs-var">wrap</span></a><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-733"></a><span>    </span><span class="hs-keyword">else</span><span> </span><a href="#local-1627785048"><span class="hs-identifier hs-var">pp_thing_inside</span></a><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-734"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-735"></a><span>    </span><span class="hs-identifier">help</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcEvidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-736"></a><span>    </span><span class="hs-comment">-- True  &lt;=&gt; appears in function application position</span><span>
</span><a name="line-737"></a><span>    </span><span class="hs-comment">-- False &lt;=&gt; appears as body of let or lambda</span><span>
</span><a name="line-738"></a><span>    </span><a name="local-1627785049"><a href="#local-1627785049"><span class="hs-identifier">help</span></a></a><span> </span><a name="local-1627785051"><a href="#local-1627785051"><span class="hs-identifier">it</span></a></a><span> </span><a href="TcEvidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a><span>             </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785051"><span class="hs-identifier hs-var">it</span></a><span>
</span><a name="line-739"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785052"><a href="#local-1627785052"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpCompose"><span class="hs-identifier hs-var">WpCompose</span></a><span> </span><a name="local-1627785053"><a href="#local-1627785053"><span class="hs-identifier">f1</span></a></a><span> </span><a name="local-1627785054"><a href="#local-1627785054"><span class="hs-identifier">f2</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785049"><span class="hs-identifier hs-var">help</span></a><span> </span><span class="hs-special">(</span><a href="#local-1627785049"><span class="hs-identifier hs-var">help</span></a><span> </span><a href="#local-1627785052"><span class="hs-identifier hs-var">it</span></a><span> </span><a href="#local-1627785054"><span class="hs-identifier hs-var">f2</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627785053"><span class="hs-identifier hs-var">f1</span></a><span>
</span><a name="line-740"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785055"><a href="#local-1627785055"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a><span> </span><a name="local-1627785056"><a href="#local-1627785056"><span class="hs-identifier">f1</span></a></a><span> </span><a name="local-1627785057"><a href="#local-1627785057"><span class="hs-identifier">f2</span></a></a><span> </span><a name="local-1627785058"><a href="#local-1627785058"><span class="hs-identifier">t1</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;\\(x&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785058"><span class="hs-identifier hs-var">t1</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;).&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span>
</span><a name="line-741"></a><span>                                              </span><a href="#local-1627785049"><span class="hs-identifier hs-var">help</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627785055"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">True</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="#local-1627785049"><span class="hs-identifier hs-var">help</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;x&quot;</span><span class="hs-special">)</span><span> </span><a href="#local-1627785056"><span class="hs-identifier hs-var">f1</span></a><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">)</span><span> </span><a href="#local-1627785057"><span class="hs-identifier hs-var">f2</span></a><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-742"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785059"><a href="#local-1627785059"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a><span> </span><a name="local-1627785060"><a href="#local-1627785060"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><a href="#local-1627785059"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">,</span><span> </span><a href="Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;|&gt;&quot;</span><span>
</span><a name="line-743"></a><span>                                              </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Coercion.html#pprParendCo"><span class="hs-identifier hs-var">pprParendCo</span></a><span> </span><a href="#local-1627785060"><span class="hs-identifier hs-var">co</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-744"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785061"><a href="#local-1627785061"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a><span> </span><a name="local-1627785062"><a href="#local-1627785062"><span class="hs-identifier">id</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#no_parens"><span class="hs-identifier hs-var">no_parens</span></a><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><a href="#local-1627785061"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">,</span><span> </span><a href="Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a><span> </span><span class="hs-number">2</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785062"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-745"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785063"><a href="#local-1627785063"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a><span> </span><a name="local-1627785064"><a href="#local-1627785064"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#no_parens"><span class="hs-identifier hs-var">no_parens</span></a><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><a href="#local-1627785063"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;@&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="TyCoRep.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a><span> </span><a href="#local-1627785064"><span class="hs-identifier hs-var">ty</span></a><span class="hs-special">]</span><span>
</span><a name="line-746"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785065"><a href="#local-1627785065"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a><span> </span><a name="local-1627785066"><a href="#local-1627785066"><span class="hs-identifier">id</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;\\&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-1627785050"><span class="hs-identifier hs-var">pp_bndr</span></a><span> </span><a href="#local-1627785066"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627785065"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">]</span><span>
</span><a name="line-747"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785067"><a href="#local-1627785067"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a><span> </span><a name="local-1627785068"><a href="#local-1627785068"><span class="hs-identifier">tv</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;/\\&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="#local-1627785050"><span class="hs-identifier hs-var">pp_bndr</span></a><span> </span><a href="#local-1627785068"><span class="hs-identifier hs-var">tv</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627785067"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">]</span><span>
</span><a name="line-748"></a><span>    </span><span class="hs-identifier">help</span><span> </span><a name="local-1627785069"><a href="#local-1627785069"><span class="hs-identifier">it</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a><span> </span><a name="local-1627785070"><a href="#local-1627785070"><span class="hs-identifier">binds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="TcEvidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;let&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785070"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-1627785069"><span class="hs-identifier hs-var">it</span></a><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">]</span><span>
</span><a name="line-749"></a><span>
</span><a name="line-750"></a><span>    </span><a name="local-1627785050"><a href="#local-1627785050"><span class="hs-identifier">pp_bndr</span></a></a><span> </span><a name="local-1627785071"><a href="#local-1627785071"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprBndr"><span class="hs-identifier hs-var">pprBndr</span></a><span> </span><a href="Outputable.html#LambdaBind"><span class="hs-identifier hs-var">LambdaBind</span></a><span> </span><a href="#local-1627785071"><span class="hs-identifier hs-var">v</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a><span>
</span><a name="line-751"></a><span>
</span><a name="line-752"></a><span class="hs-identifier">add_parens</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">no_parens</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-753"></a><a name="add_parens"><a href="TcEvidence.html#add_parens"><span class="hs-identifier">add_parens</span></a></a><span> </span><a name="local-1627785073"><a href="#local-1627785073"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><a href="#local-1627785073"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-754"></a><span class="hs-identifier">add_parens</span><span> </span><a name="local-1627785074"><a href="#local-1627785074"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785074"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-755"></a><a name="no_parens"><a href="TcEvidence.html#no_parens"><span class="hs-identifier">no_parens</span></a></a><span> </span><a name="local-1627785075"><a href="#local-1627785075"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785075"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-756"></a><span>
</span><a name="line-757"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-758"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#TcEvBinds"><span class="hs-identifier hs-var">TcEvBinds</span></a><span> </span><a name="local-1627785111"><a href="#local-1627785111"><span class="hs-identifier">v</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785111"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-759"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a><span> </span><a name="local-1627785112"><a href="#local-1627785112"><span class="hs-identifier">bs</span></a></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;EvBinds&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a><span> </span><a href="#local-1627785112"><span class="hs-identifier hs-var">bs</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-760"></a><span>
</span><a name="line-761"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-762"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier hs-var">EvBindsVar</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1627785110"><a href="#local-1627785110"><span class="hs-identifier">u</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;EvBindsVar&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#angleBrackets"><span class="hs-identifier hs-var">angleBrackets</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785110"><span class="hs-identifier hs-var">u</span></a><span class="hs-special">)</span><span>
</span><a name="line-763"></a><span>
</span><a name="line-764"></a><span class="hs-keyword">instance</span><span> </span><a href="Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a><span> </span><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-765"></a><span>  </span><a name="local-1912670564"><a href="Unique.html#getUnique"><span class="hs-identifier">getUnique</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBindsVar"><span class="hs-identifier hs-var">EvBindsVar</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-1627785109"><a href="#local-1627785109"><span class="hs-identifier">u</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627785109"><span class="hs-identifier hs-var">u</span></a><span>
</span><a name="line-766"></a><span>
</span><a name="line-767"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-768"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvBind"><span class="hs-identifier hs-var">EvBind</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">eb_lhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627785105"><a href="#local-1627785105"><span class="hs-identifier">v</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_rhs</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627785106"><a href="#local-1627785106"><span class="hs-identifier">e</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">eb_is_given</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627785107"><a href="#local-1627785107"><span class="hs-identifier">is_given</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-769"></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="#local-1627785108"><span class="hs-identifier hs-var">pp_gw</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785105"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-770"></a><span>           </span><span class="hs-special">,</span><span> </span><a href="Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a><span> </span><span class="hs-number">2</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785106"><span class="hs-identifier hs-var">e</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-771"></a><span>     </span><span class="hs-keyword">where</span><span>
</span><a name="line-772"></a><span>       </span><a name="local-1627785108"><a href="#local-1627785108"><span class="hs-identifier">pp_gw</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><a href="#local-1627785107"><span class="hs-identifier hs-var">is_given</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'G'</span><span> </span><span class="hs-keyword">else</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'W'</span><span class="hs-special">)</span><span>
</span><a name="line-773"></a><span>   </span><span class="hs-comment">-- We cheat a bit and pretend EqVars are CoVars for the purposes of pretty printing</span><span>
</span><a name="line-774"></a><span>
</span><a name="line-775"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-776"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvId"><span class="hs-identifier hs-var">EvId</span></a><span> </span><a name="local-1627785090"><a href="#local-1627785090"><span class="hs-identifier">v</span></a></a><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785090"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-777"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCast"><span class="hs-identifier hs-var">EvCast</span></a><span> </span><a name="local-1627785091"><a href="#local-1627785091"><span class="hs-identifier">v</span></a></a><span> </span><a name="local-1627785092"><a href="#local-1627785092"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785091"><span class="hs-identifier hs-var">v</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;`cast`&quot;</span><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Coercion.html#pprParendCo"><span class="hs-identifier hs-var">pprParendCo</span></a><span> </span><a href="#local-1627785092"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-778"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCoercion"><span class="hs-identifier hs-var">EvCoercion</span></a><span> </span><a name="local-1627785093"><a href="#local-1627785093"><span class="hs-identifier">co</span></a></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;CO&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785093"><span class="hs-identifier hs-var">co</span></a><span>
</span><a name="line-779"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvSuperClass"><span class="hs-identifier hs-var">EvSuperClass</span></a><span> </span><a name="local-1627785094"><a href="#local-1627785094"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-1627785095"><a href="#local-1627785095"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;sc&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="#local-1627785094"><span class="hs-identifier hs-var">d</span></a><span class="hs-special">,</span><a href="#local-1627785095"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-780"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvDFunApp"><span class="hs-identifier hs-var">EvDFunApp</span></a><span> </span><a name="local-1627785096"><a href="#local-1627785096"><span class="hs-identifier">df</span></a></a><span> </span><a name="local-1627785097"><a href="#local-1627785097"><span class="hs-identifier">tys</span></a></a><span> </span><a name="local-1627785098"><a href="#local-1627785098"><span class="hs-identifier">ts</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785096"><span class="hs-identifier hs-var">df</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'@'</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785097"><span class="hs-identifier hs-var">tys</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785098"><span class="hs-identifier hs-var">ts</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-781"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvLit"><span class="hs-identifier hs-var">EvLit</span></a><span> </span><a name="local-1627785099"><a href="#local-1627785099"><span class="hs-identifier">l</span></a></a><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785099"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-782"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier hs-var">EvCallStack</span></a><span> </span><a name="local-1627785100"><a href="#local-1627785100"><span class="hs-identifier">cs</span></a></a><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785100"><span class="hs-identifier hs-var">cs</span></a><span>
</span><a name="line-783"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvDelayedError"><span class="hs-identifier hs-var">EvDelayedError</span></a><span> </span><a name="local-1627785101"><a href="#local-1627785101"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1627785102"><a href="#local-1627785102"><span class="hs-identifier">msg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>     </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;error&quot;</span><span>
</span><a name="line-784"></a><span>                                </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a><span> </span><span class="hs-special">[</span><span> </span><a href="Outputable.html#char"><span class="hs-identifier hs-var">char</span></a><span> </span><span class="hs-char">'@'</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785101"><span class="hs-identifier hs-var">ty</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785102"><span class="hs-identifier hs-var">msg</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-785"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a><span> </span><a name="local-1627785103"><a href="#local-1627785103"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1627785104"><a href="#local-1627785104"><span class="hs-identifier">ev</span></a></a><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785104"><span class="hs-identifier hs-var">ev</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Typeable&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785103"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-786"></a><span>
</span><a name="line-787"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#EvLit"><span class="hs-identifier hs-type">EvLit</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-788"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvNum"><span class="hs-identifier hs-var">EvNum</span></a><span> </span><a name="local-1627785088"><a href="#local-1627785088"><span class="hs-identifier">n</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#integer"><span class="hs-identifier hs-var">integer</span></a><span> </span><a href="#local-1627785088"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-789"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvStr"><span class="hs-identifier hs-var">EvStr</span></a><span> </span><a name="local-1627785089"><a href="#local-1627785089"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a><span> </span><a href="#local-1627785089"><span class="hs-identifier hs-var">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-790"></a><span>
</span><a name="line-791"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#EvCallStack"><span class="hs-identifier hs-type">EvCallStack</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-792"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a href="TcEvidence.html#EvCsEmpty"><span class="hs-identifier hs-var">EvCsEmpty</span></a><span>
</span><a name="line-793"></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;[]&quot;</span><span>
</span><a name="line-794"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvCsPushCall"><span class="hs-identifier hs-var">EvCsPushCall</span></a><span> </span><a name="local-1627785085"><a href="#local-1627785085"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627785086"><a href="#local-1627785086"><span class="hs-identifier">loc</span></a></a><span> </span><a name="local-1627785087"><a href="#local-1627785087"><span class="hs-identifier">tm</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-795"></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="#local-1627785085"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><a href="#local-1627785086"><span class="hs-identifier hs-var">loc</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;:&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785087"><span class="hs-identifier hs-var">tm</span></a><span>
</span><a name="line-796"></a><span>
</span><a name="line-797"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="TcEvidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-798"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvTypeableTyCon"><span class="hs-identifier hs-var">EvTypeableTyCon</span></a><span> </span><a name="local-1627785081"><a href="#local-1627785081"><span class="hs-identifier">ts</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;TC&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785081"><span class="hs-identifier hs-var">ts</span></a><span>
</span><a name="line-799"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvTypeableTyApp"><span class="hs-identifier hs-var">EvTypeableTyApp</span></a><span> </span><a name="local-1627785082"><a href="#local-1627785082"><span class="hs-identifier">t1</span></a></a><span> </span><a name="local-1627785083"><a href="#local-1627785083"><span class="hs-identifier">t2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785082"><span class="hs-identifier hs-var">t1</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785083"><span class="hs-identifier hs-var">t2</span></a><span class="hs-special">)</span><span>
</span><a name="line-800"></a><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#EvTypeableTyLit"><span class="hs-identifier hs-var">EvTypeableTyLit</span></a><span> </span><a name="local-1627785084"><a href="#local-1627785084"><span class="hs-identifier">t1</span></a></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;TyLit&quot;</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785084"><span class="hs-identifier hs-var">t1</span></a><span>
</span><a name="line-801"></a><span>
</span><a name="line-802"></a><span>
</span><a name="line-803"></a><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><a name="line-804"></a><span class="hs-comment">-- Helper functions for dealing with IP newtype-dictionaries</span><span>
</span><a name="line-805"></a><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><a name="line-806"></a><span>
</span><a name="line-807"></a><span class="hs-comment">-- | Create a 'Coercion' that unwraps an implicit-parameter or</span><span>
</span><a name="line-808"></a><span class="hs-comment">-- overloaded-label dictionary to expose the underlying value. We</span><span>
</span><a name="line-809"></a><span class="hs-comment">-- expect the 'Type' to have the form `IP sym ty` or `IsLabel sym ty`,</span><span>
</span><a name="line-810"></a><span class="hs-comment">-- and return a 'Coercion' `co :: IP sym ty ~ ty` or</span><span>
</span><a name="line-811"></a><span class="hs-comment">-- `co :: IsLabel sym ty ~ Proxy# sym -&gt; ty`.  See also</span><span>
</span><a name="line-812"></a><span class="hs-comment">-- Note [Type-checking overloaded labels] in TcExpr.</span><span>
</span><a name="line-813"></a><span class="hs-identifier">unwrapIP</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a><span>
</span><a name="line-814"></a><a name="unwrapIP"><a href="TcEvidence.html#unwrapIP"><span class="hs-identifier">unwrapIP</span></a></a><span> </span><a name="local-1627785076"><a href="#local-1627785076"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-815"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="TyCon.html#unwrapNewTyCon_maybe"><span class="hs-identifier hs-var">unwrapNewTyCon_maybe</span></a><span> </span><a href="#local-1627785077"><span class="hs-identifier hs-var">tc</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-816"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a name="local-1627785079"><a href="#local-1627785079"><span class="hs-identifier">ax</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Coercion.html#mkUnbranchedAxInstCo"><span class="hs-identifier hs-var">mkUnbranchedAxInstCo</span></a><span> </span><a href="CoAxiom.html#Representational"><span class="hs-identifier hs-var">Representational</span></a><span> </span><a href="#local-1627785079"><span class="hs-identifier hs-var">ax</span></a><span> </span><a href="#local-1627785078"><span class="hs-identifier hs-var">tys</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-817"></a><span>    </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;unwrapIP&quot;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span>
</span><a name="line-818"></a><span>                       </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;The dictionary for&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627785077"><span class="hs-identifier hs-var">tc</span></a><span class="hs-special">)</span><span>
</span><a name="line-819"></a><span>                         </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;is not a newtype!&quot;</span><span>
</span><a name="line-820"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-821"></a><span>  </span><span class="hs-special">(</span><a name="local-1627785077"><a href="#local-1627785077"><span class="hs-identifier">tc</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1627785078"><a href="#local-1627785078"><span class="hs-identifier">tys</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Type.html#splitTyConApp"><span class="hs-identifier hs-var">splitTyConApp</span></a><span> </span><a href="#local-1627785076"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-822"></a><span>
</span><a name="line-823"></a><span class="hs-comment">-- | Create a 'Coercion' that wraps a value in an implicit-parameter</span><span>
</span><a name="line-824"></a><span class="hs-comment">-- dictionary. See 'unwrapIP'.</span><span>
</span><a name="line-825"></a><span class="hs-identifier">wrapIP</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a><span>
</span><a name="line-826"></a><a name="wrapIP"><a href="TcEvidence.html#wrapIP"><span class="hs-identifier">wrapIP</span></a></a><span> </span><a name="local-1627785080"><a href="#local-1627785080"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Coercion.html#mkSymCo"><span class="hs-identifier hs-var">mkSymCo</span></a><span> </span><span class="hs-special">(</span><a href="TcEvidence.html#unwrapIP"><span class="hs-identifier hs-var">unwrapIP</span></a><span> </span><a href="#local-1627785080"><span class="hs-identifier hs-var">ty</span></a><span class="hs-special">)</span><span>
</span><a name="line-827"></a></pre></body></html>