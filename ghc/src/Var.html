<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

\section{@Vars@: Variables}
-}</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE CPP, DeriveDataTypeable, MultiWayIf #-}</span><span>
</span><a name="line-9"></a><span>
</span><a name="line-10"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- #name_types#</span><span>
</span><a name="line-12"></a><span class="hs-comment">-- GHC uses several kinds of name internally:</span><span>
</span><a name="line-13"></a><span class="hs-comment">--</span><span>
</span><a name="line-14"></a><span class="hs-comment">-- * 'OccName.OccName': see &quot;OccName#name_types&quot;</span><span>
</span><a name="line-15"></a><span class="hs-comment">--</span><span>
</span><a name="line-16"></a><span class="hs-comment">-- * 'RdrName.RdrName': see &quot;RdrName#name_types&quot;</span><span>
</span><a name="line-17"></a><span class="hs-comment">--</span><span>
</span><a name="line-18"></a><span class="hs-comment">-- * 'Name.Name': see &quot;Name#name_types&quot;</span><span>
</span><a name="line-19"></a><span class="hs-comment">--</span><span>
</span><a name="line-20"></a><span class="hs-comment">-- * 'Id.Id': see &quot;Id#name_types&quot;</span><span>
</span><a name="line-21"></a><span class="hs-comment">--</span><span>
</span><a name="line-22"></a><span class="hs-comment">-- * 'Var.Var' is a synonym for the 'Id.Id' type but it may additionally</span><span>
</span><a name="line-23"></a><span class="hs-comment">--   potentially contain type variables, which have a 'TyCoRep.Kind'</span><span>
</span><a name="line-24"></a><span class="hs-comment">--   rather than a 'TyCoRep.Type' and only contain some extra</span><span>
</span><a name="line-25"></a><span class="hs-comment">--   details during typechecking.</span><span>
</span><a name="line-26"></a><span class="hs-comment">--</span><span>
</span><a name="line-27"></a><span class="hs-comment">--   These 'Var.Var' names may either be global or local, see &quot;Var#globalvslocal&quot;</span><span>
</span><a name="line-28"></a><span class="hs-comment">--</span><span>
</span><a name="line-29"></a><span class="hs-comment">-- #globalvslocal#</span><span>
</span><a name="line-30"></a><span class="hs-comment">-- Global 'Id's and 'Var's are those that are imported or correspond</span><span>
</span><a name="line-31"></a><span class="hs-comment">--    to a data constructor, primitive operation, or record selectors.</span><span>
</span><a name="line-32"></a><span class="hs-comment">-- Local 'Id's and 'Var's are those bound within an expression</span><span>
</span><a name="line-33"></a><span class="hs-comment">--    (e.g. by a lambda) or at the top level of the module being compiled.</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Var</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-36"></a><span>        </span><span class="hs-comment">-- * The main data type and synonyms</span><span>
</span><a name="line-37"></a><span>        </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#NcId"><span class="hs-identifier hs-type">NcId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#DictId"><span class="hs-identifier hs-type">DictId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#DFunId"><span class="hs-identifier hs-type">DFunId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#EqVar"><span class="hs-identifier hs-type">EqVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#IpId"><span class="hs-identifier hs-type">IpId</span></a><span class="hs-special">,</span><span>
</span><a name="line-38"></a><span>        </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#KindVar"><span class="hs-identifier hs-type">KindVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#TKVar"><span class="hs-identifier hs-type">TKVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a><span class="hs-special">,</span><span>
</span><a name="line-39"></a><span>
</span><a name="line-40"></a><span>        </span><span class="hs-comment">-- ** Taking 'Var's apart</span><span>
</span><a name="line-41"></a><span>        </span><a href="Var.html#varName"><span class="hs-identifier hs-var">varName</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#varType"><span class="hs-identifier hs-var">varType</span></a><span class="hs-special">,</span><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span>        </span><span class="hs-comment">-- ** Modifying 'Var's</span><span>
</span><a name="line-44"></a><span>        </span><a href="Var.html#setVarName"><span class="hs-identifier hs-var">setVarName</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setVarUnique"><span class="hs-identifier hs-var">setVarUnique</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setVarType"><span class="hs-identifier hs-var">setVarType</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#updateVarType"><span class="hs-identifier hs-var">updateVarType</span></a><span class="hs-special">,</span><span>
</span><a name="line-45"></a><span>        </span><a href="Var.html#updateVarTypeM"><span class="hs-identifier hs-var">updateVarTypeM</span></a><span class="hs-special">,</span><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span>        </span><span class="hs-comment">-- ** Constructing, taking apart, modifying 'Id's</span><span>
</span><a name="line-48"></a><span>        </span><a href="Var.html#mkGlobalVar"><span class="hs-identifier hs-var">mkGlobalVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#mkLocalVar"><span class="hs-identifier hs-var">mkLocalVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#mkExportedLocalVar"><span class="hs-identifier hs-var">mkExportedLocalVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#mkCoVar"><span class="hs-identifier hs-var">mkCoVar</span></a><span class="hs-special">,</span><span>
</span><a name="line-49"></a><span>        </span><a href="Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>        </span><a href="Var.html#lazySetIdInfo"><span class="hs-identifier hs-var">lazySetIdInfo</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setIdDetails"><span class="hs-identifier hs-var">setIdDetails</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#globaliseId"><span class="hs-identifier hs-var">globaliseId</span></a><span class="hs-special">,</span><span>
</span><a name="line-51"></a><span>        </span><a href="Var.html#setIdExported"><span class="hs-identifier hs-var">setIdExported</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setIdNotExported"><span class="hs-identifier hs-var">setIdNotExported</span></a><span class="hs-special">,</span><span>
</span><a name="line-52"></a><span>
</span><a name="line-53"></a><span>        </span><span class="hs-comment">-- ** Predicates</span><span>
</span><a name="line-54"></a><span>        </span><a href="Var.html#isId"><span class="hs-identifier hs-var">isId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isTKVar"><span class="hs-identifier hs-var">isTKVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isTcTyVar"><span class="hs-identifier hs-var">isTcTyVar</span></a><span class="hs-special">,</span><span>
</span><a name="line-55"></a><span>        </span><a href="Var.html#isLocalVar"><span class="hs-identifier hs-var">isLocalVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isLocalId"><span class="hs-identifier hs-var">isLocalId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isNonCoVarId"><span class="hs-identifier hs-var">isNonCoVarId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a><span class="hs-special">,</span><span>
</span><a name="line-56"></a><span>        </span><a href="Var.html#isGlobalId"><span class="hs-identifier hs-var">isGlobalId</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#isExportedId"><span class="hs-identifier hs-var">isExportedId</span></a><span class="hs-special">,</span><span>
</span><a name="line-57"></a><span>        </span><a href="Var.html#mustHaveLocalBinding"><span class="hs-identifier hs-var">mustHaveLocalBinding</span></a><span class="hs-special">,</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span>        </span><span class="hs-comment">-- ** Constructing 'TyVar's</span><span>
</span><a name="line-60"></a><span>        </span><a href="Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a><span class="hs-special">,</span><span>
</span><a name="line-61"></a><span>
</span><a name="line-62"></a><span>        </span><span class="hs-comment">-- ** Taking 'TyVar's apart</span><span>
</span><a name="line-63"></a><span>        </span><a href="Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#tcTyVarDetails"><span class="hs-identifier hs-var">tcTyVarDetails</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setTcTyVarDetails"><span class="hs-identifier hs-var">setTcTyVarDetails</span></a><span class="hs-special">,</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span>        </span><span class="hs-comment">-- ** Modifying 'TyVar's</span><span>
</span><a name="line-66"></a><span>        </span><a href="Var.html#setTyVarName"><span class="hs-identifier hs-var">setTyVarName</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setTyVarUnique"><span class="hs-identifier hs-var">setTyVarUnique</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#setTyVarKind"><span class="hs-identifier hs-var">setTyVarKind</span></a><span class="hs-special">,</span><span> </span><a href="Var.html#updateTyVarKind"><span class="hs-identifier hs-var">updateTyVarKind</span></a><span class="hs-special">,</span><span>
</span><a name="line-67"></a><span>        </span><a href="Var.html#updateTyVarKindM"><span class="hs-identifier hs-var">updateTyVarKindM</span></a><span>
</span><a name="line-68"></a><span>
</span><a name="line-69"></a><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-cpp">#include &quot;HsVersions.h&quot;</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE #-}</span><span>   </span><a href="TyCoRep.html"><span class="hs-identifier">TyCoRep</span></a><span class="hs-special">(</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-74"></a><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE #-}</span><span>   </span><a href="TcType.html"><span class="hs-identifier">TcType</span></a><span class="hs-special">(</span><span> </span><a href="TcType.html#TcTyVarDetails"><span class="hs-identifier hs-type">TcTyVarDetails</span></a><span class="hs-special">,</span><span> </span><a href="TcType.html#pprTcTyVarDetails"><span class="hs-identifier hs-var">pprTcTyVarDetails</span></a><span class="hs-special">,</span><span> </span><a href="TcType.html#vanillaSkolemTv"><span class="hs-identifier hs-var">vanillaSkolemTv</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-75"></a><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE #-}</span><span>   </span><a href="IdInfo.html"><span class="hs-identifier">IdInfo</span></a><span class="hs-special">(</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span class="hs-special">,</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span class="hs-special">,</span><span> </span><a href="IdInfo.html#coVarDetails"><span class="hs-identifier hs-var">coVarDetails</span></a><span class="hs-special">,</span><span> </span><a href="IdInfo.html#isCoVarDetails"><span class="hs-identifier hs-var">isCoVarDetails</span></a><span class="hs-special">,</span><span> </span><a href="IdInfo.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a><span class="hs-special">,</span><span> </span><a href="IdInfo.html#pprIdDetails"><span class="hs-identifier hs-var">pprIdDetails</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span class="hs-keyword">import</span><span> </span><a href="Name.html"><span class="hs-identifier">Name</span></a><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><a href="OccName.html#varName"><span class="hs-identifier hs-var">varName</span></a><span class="hs-special">)</span><span>
</span><a name="line-78"></a><span class="hs-keyword">import</span><span> </span><a href="Unique.html"><span class="hs-identifier">Unique</span></a><span>
</span><a name="line-79"></a><span class="hs-keyword">import</span><span> </span><a href="Util.html"><span class="hs-identifier">Util</span></a><span>
</span><a name="line-80"></a><span class="hs-keyword">import</span><span> </span><a href="DynFlags.html"><span class="hs-identifier">DynFlags</span></a><span>
</span><a name="line-81"></a><span class="hs-keyword">import</span><span> </span><a href="Outputable.html"><span class="hs-identifier">Outputable</span></a><span>
</span><a name="line-82"></a><span>
</span><a name="line-83"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Data</span></a><span>
</span><a name="line-84"></a><span>
</span><a name="line-85"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
                     Synonyms
*                                                                      *
************************************************************************
-- These synonyms are here and not in Id because otherwise we need a very
-- large number of SOURCE imports of Id.hs :-(
-}</span><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span class="hs-keyword">type</span><span> </span><a name="Id"><a href="Var.html#Id"><span class="hs-identifier">Id</span></a></a><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>       </span><span class="hs-comment">-- A term-level identifier</span><span>
</span><a name="line-96"></a><span>                       </span><span class="hs-comment">--  predicate: isId</span><span>
</span><a name="line-97"></a><span>
</span><a name="line-98"></a><span class="hs-keyword">type</span><span> </span><a name="CoVar"><a href="Var.html#CoVar"><span class="hs-identifier">CoVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>        </span><span class="hs-comment">-- See Note [Evidence: EvIds and CoVars]</span><span>
</span><a name="line-99"></a><span>                       </span><span class="hs-comment">--   predicate: isCoVar</span><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span class="hs-keyword">type</span><span> </span><a name="NcId"><a href="Var.html#NcId"><span class="hs-identifier">NcId</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>        </span><span class="hs-comment">-- A term-level (value) variable that is</span><span>
</span><a name="line-102"></a><span>                       </span><span class="hs-comment">-- /not/ an (unlifted) coercion</span><span>
</span><a name="line-103"></a><span>                       </span><span class="hs-comment">--    predicate: isNonCoVarId</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-keyword">type</span><span> </span><a name="TyVar"><a href="Var.html#TyVar"><span class="hs-identifier">TyVar</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>     </span><span class="hs-comment">-- Type *or* kind variable (historical)</span><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span class="hs-keyword">type</span><span> </span><a name="TKVar"><a href="Var.html#TKVar"><span class="hs-identifier">TKVar</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>     </span><span class="hs-comment">-- Type *or* kind variable (historical)</span><span>
</span><a name="line-108"></a><span class="hs-keyword">type</span><span> </span><a name="TypeVar"><a href="Var.html#TypeVar"><span class="hs-identifier">TypeVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>     </span><span class="hs-comment">-- Definitely a type variable</span><span>
</span><a name="line-109"></a><span class="hs-keyword">type</span><span> </span><a name="KindVar"><a href="Var.html#KindVar"><span class="hs-identifier">KindVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>     </span><span class="hs-comment">-- Definitely a kind variable</span><span>
</span><a name="line-110"></a><span>                       </span><span class="hs-comment">-- See Note [Kind and type variables]</span><span>
</span><a name="line-111"></a><span>
</span><a name="line-112"></a><span class="hs-comment">-- See Note [Evidence: EvIds and CoVars]</span><span>
</span><a name="line-113"></a><span class="hs-keyword">type</span><span> </span><a name="EvId"><a href="Var.html#EvId"><span class="hs-identifier">EvId</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>        </span><span class="hs-comment">-- Term-level evidence: DictId, IpId, or EqVar</span><span>
</span><a name="line-114"></a><span class="hs-keyword">type</span><span> </span><a name="EvVar"><a href="Var.html#EvVar"><span class="hs-identifier">EvVar</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a><span>      </span><span class="hs-comment">-- ...historical name for EvId</span><span>
</span><a name="line-115"></a><span class="hs-keyword">type</span><span> </span><a name="DFunId"><a href="Var.html#DFunId"><span class="hs-identifier">DFunId</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>        </span><span class="hs-comment">-- A dictionary function</span><span>
</span><a name="line-116"></a><span class="hs-keyword">type</span><span> </span><a name="DictId"><a href="Var.html#DictId"><span class="hs-identifier">DictId</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a><span>      </span><span class="hs-comment">-- A dictionary variable</span><span>
</span><a name="line-117"></a><span class="hs-keyword">type</span><span> </span><a name="IpId"><a href="Var.html#IpId"><span class="hs-identifier">IpId</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a><span>      </span><span class="hs-comment">-- A term-level implicit parameter</span><span>
</span><a name="line-118"></a><span class="hs-keyword">type</span><span> </span><a name="EqVar"><a href="Var.html#EqVar"><span class="hs-identifier">EqVar</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a><span>      </span><span class="hs-comment">-- Boxed equality evidence</span><span>
</span><a name="line-119"></a><span>
</span><a name="line-120"></a><span class="hs-keyword">type</span><span> </span><a name="TyCoVar"><a href="Var.html#TyCoVar"><span class="hs-identifier">TyCoVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>       </span><span class="hs-comment">-- Type, kind, *or* coercion variable</span><span>
</span><a name="line-121"></a><span>                        </span><span class="hs-comment">--   predicate: isTyCoVar</span><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-comment">{- Note [Evidence: EvIds and CoVars]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* An EvId (evidence Id) is a term-level evidence variable
  (dictionary, implicit parameter, or equality). Could be boxed or unboxed.

* DictId, IpId, and EqVar are synonyms when we know what kind of
  evidence we are talking about.  For example, an EqVar has type (t1 ~ t2).

* A CoVar is always an un-lifted coercion, of type (t1 ~# t2) or (t1 ~R# t2)

Note [Kind and type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Before kind polymorphism, TyVar were used to mean type variables. Now
they are use to mean kind *or* type variables. KindVar is used when we
know for sure that it is a kind variable. In future, we might want to
go over the whole compiler code to use:
   - TKVar   to mean kind or type variables
   - TypeVar to mean         type variables only
   - KindVar to mean kind         variables


************************************************************************
*                                                                      *
\subsection{The main data type declarations}
*                                                                      *
************************************************************************


Every @Var@ has a @Unique@, to uniquify it and for fast comparison, a
@Type@, and an @IdInfo@ (non-essential info about it, e.g.,
strictness).  The essential info about different kinds of @Vars@ is
in its @VarDetails@.
-}</span><span>
</span><a name="line-156"></a><span>
</span><a name="line-157"></a><span class="hs-comment">-- | Essentially a typed 'Name', that may also contain some additional information</span><span>
</span><a name="line-158"></a><span class="hs-comment">-- about the 'Var' and it's use sites.</span><span>
</span><a name="line-159"></a><span class="hs-keyword">data</span><span> </span><a name="Var"><a href="Var.html#Var"><span class="hs-identifier">Var</span></a></a><span>
</span><a name="line-160"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="TyVar"><a href="Var.html#TyVar"><span class="hs-identifier">TyVar</span></a></a><span> </span><span class="hs-special">{</span><span>  </span><span class="hs-comment">-- Type and kind variables</span><span>
</span><a name="line-161"></a><span>             </span><span class="hs-comment">-- see Note [Kind and type variables]</span><span>
</span><a name="line-162"></a><span>        </span><a name="varName"><a href="Var.html#varName"><span class="hs-identifier">varName</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">,</span><span>
</span><a name="line-163"></a><span>        </span><a name="realUnique"><a href="Var.html#realUnique"><span class="hs-identifier">realUnique</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK #-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span>
</span><a name="line-164"></a><span>                                     </span><span class="hs-comment">-- ^ Key for fast comparison</span><span>
</span><a name="line-165"></a><span>                                     </span><span class="hs-comment">-- Identical to the Unique in the name,</span><span>
</span><a name="line-166"></a><span>                                     </span><span class="hs-comment">-- cached here for speed</span><span>
</span><a name="line-167"></a><span>        </span><a name="varType"><a href="Var.html#varType"><span class="hs-identifier">varType</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span>           </span><span class="hs-comment">-- ^ The type or kind of the 'Var' in question</span><span>
</span><a name="line-168"></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-169"></a><span>
</span><a name="line-170"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TcTyVar"><a href="Var.html#TcTyVar"><span class="hs-identifier">TcTyVar</span></a></a><span> </span><span class="hs-special">{</span><span>                           </span><span class="hs-comment">-- Used only during type inference</span><span>
</span><a name="line-171"></a><span>                                        </span><span class="hs-comment">-- Used for kind variables during</span><span>
</span><a name="line-172"></a><span>                                        </span><span class="hs-comment">-- inference, as well</span><span>
</span><a name="line-173"></a><span>        </span><a name="varName"><a href="Var.html#varName"><span class="hs-identifier">varName</span></a></a><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">,</span><span>
</span><a name="line-174"></a><span>        </span><a name="realUnique"><a href="Var.html#realUnique"><span class="hs-identifier">realUnique</span></a></a><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK #-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span>
</span><a name="line-175"></a><span>        </span><a name="varType"><a href="Var.html#varType"><span class="hs-identifier">varType</span></a></a><span>        </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span class="hs-special">,</span><span>
</span><a name="line-176"></a><span>        </span><a name="tc_tv_details"><a href="Var.html#tc_tv_details"><span class="hs-identifier">tc_tv_details</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="TcType.html#TcTyVarDetails"><span class="hs-identifier hs-type">TcTyVarDetails</span></a><span>
</span><a name="line-177"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Id"><a href="Var.html#Id"><span class="hs-identifier">Id</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-180"></a><span>        </span><a name="varName"><a href="Var.html#varName"><span class="hs-identifier">varName</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">,</span><span>
</span><a name="line-181"></a><span>        </span><a name="realUnique"><a href="Var.html#realUnique"><span class="hs-identifier">realUnique</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK #-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span>
</span><a name="line-182"></a><span>        </span><a name="varType"><a href="Var.html#varType"><span class="hs-identifier">varType</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">,</span><span>
</span><a name="line-183"></a><span>        </span><a name="idScope"><a href="Var.html#idScope"><span class="hs-identifier">idScope</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#IdScope"><span class="hs-identifier hs-type">IdScope</span></a><span class="hs-special">,</span><span>
</span><a name="line-184"></a><span>        </span><a name="id_details"><a href="Var.html#id_details"><span class="hs-identifier">id_details</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- Stable, doesn't change</span><span>
</span><a name="line-185"></a><span>        </span><a name="id_info"><a href="Var.html#id_info"><span class="hs-identifier">id_info</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-special">}</span><span>          </span><span class="hs-comment">-- Unstable, updated by simplifier</span><span>
</span><a name="line-186"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a><span>
</span><a name="line-187"></a><span>
</span><a name="line-188"></a><span class="hs-keyword">data</span><span> </span><a name="IdScope"><a href="Var.html#IdScope"><span class="hs-identifier">IdScope</span></a></a><span>    </span><span class="hs-comment">-- See Note [GlobalId/LocalId]</span><span>
</span><a name="line-189"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="GlobalId"><a href="Var.html#GlobalId"><span class="hs-identifier">GlobalId</span></a></a><span>
</span><a name="line-190"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="LocalId"><a href="Var.html#LocalId"><span class="hs-identifier">LocalId</span></a></a><span> </span><a href="Var.html#ExportFlag"><span class="hs-identifier hs-type">ExportFlag</span></a><span>
</span><a name="line-191"></a><span>
</span><a name="line-192"></a><span class="hs-keyword">data</span><span> </span><a name="ExportFlag"><a href="Var.html#ExportFlag"><span class="hs-identifier">ExportFlag</span></a></a><span>   </span><span class="hs-comment">-- See Note [ExportFlag on binders]</span><span>
</span><a name="line-193"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NotExported"><a href="Var.html#NotExported"><span class="hs-identifier">NotExported</span></a></a><span>   </span><span class="hs-comment">-- ^ Not exported: may be discarded as dead code.</span><span>
</span><a name="line-194"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Exported"><a href="Var.html#Exported"><span class="hs-identifier">Exported</span></a></a><span>      </span><span class="hs-comment">-- ^ Exported: kept alive</span><span>
</span><a name="line-195"></a><span>
</span><a name="line-196"></a><span class="hs-comment">{- Note [ExportFlag on binders]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
An ExportFlag of &quot;Exported&quot; on a top-level binder says &quot;keep this
binding alive; do not drop it as dead code&quot;.  This transitively
keeps alive all the other top-level bindings that this binding refers
to.  This property is persisted all the way down the pipeline, so that
the binding will be compiled all the way to object code, and its
symbols will appear in the linker symbol table.

However, note that this use of &quot;exported&quot; is quite different to the
export list on a Haskell module.  Setting the ExportFlag on an Id does
/not/ mean that if you import the module (in Haskell source code) you
will see this Id.  Of course, things that appear in the export list
of the source Haskell module do indeed have their ExportFlag set.
But many other things, such as dictionary functions, are kept alive
by having their ExportFlag set, even though they are not exported
in the source-code sense.

We should probably use a different term for ExportFlag, like
KeepAlive.

Note [GlobalId/LocalId]
~~~~~~~~~~~~~~~~~~~~~~~
A GlobalId is
  * always a constant (top-level)
  * imported, or data constructor, or primop, or record selector
  * has a Unique that is globally unique across the whole
    GHC invocation (a single invocation may compile multiple modules)
  * never treated as a candidate by the free-variable finder;
        it's a constant!

A LocalId is
  * bound within an expression (lambda, case, local let(rec))
  * or defined at top level in the module being compiled
  * always treated as a candidate by the free-variable finder

After CoreTidy, top-level LocalIds are turned into GlobalIds
-}</span><span>
</span><a name="line-234"></a><span>
</span><a name="line-235"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-236"></a><span>  </span><a name="local-1912652361"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a name="local-1627510617"><a href="#local-1627510617"><span class="hs-identifier">var</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#sdocWithDynFlags"><span class="hs-identifier hs-var">sdocWithDynFlags</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1627510618"><a href="#local-1627510618"><span class="hs-identifier">dflags</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-237"></a><span>            </span><a href="Outputable.html#getPprStyle"><span class="hs-identifier hs-var">getPprStyle</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a name="local-1627510619"><a href="#local-1627510619"><span class="hs-identifier">ppr_style</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-238"></a><span>            </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span>  </span><a href="Outputable.html#debugStyle"><span class="hs-identifier hs-var">debugStyle</span></a><span> </span><a href="#local-1627510619"><span class="hs-identifier hs-var">ppr_style</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="DynFlags.html#gopt"><span class="hs-identifier hs-var">gopt</span></a><span> </span><a href="DynFlags.html#Opt_SuppressVarKinds"><span class="hs-identifier hs-var">Opt_SuppressVarKinds</span></a><span> </span><a href="#local-1627510618"><span class="hs-identifier hs-var">dflags</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-239"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">varName</span><span> </span><a href="#local-1627510617"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Var.html#ppr_debug"><span class="hs-identifier hs-var">ppr_debug</span></a><span> </span><a href="#local-1627510617"><span class="hs-identifier hs-var">var</span></a><span> </span><a href="#local-1627510619"><span class="hs-identifier hs-var">ppr_style</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span>
</span><a name="line-240"></a><span>                          </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-1627510617"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-241"></a><span>               </span><span class="hs-glyph">|</span><span>  </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span>
</span><a name="line-242"></a><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">varName</span><span> </span><a href="#local-1627510617"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="Var.html#ppr_debug"><span class="hs-identifier hs-var">ppr_debug</span></a><span> </span><a href="#local-1627510617"><span class="hs-identifier hs-var">var</span></a><span> </span><a href="#local-1627510619"><span class="hs-identifier hs-var">ppr_style</span></a><span>
</span><a name="line-243"></a><span>
</span><a name="line-244"></a><span class="hs-identifier">ppr_debug</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#PprStyle"><span class="hs-identifier hs-type">PprStyle</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-245"></a><a name="ppr_debug"><a href="Var.html#ppr_debug"><span class="hs-identifier">ppr_debug</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><a name="local-1627510534"><a href="#local-1627510534"><span class="hs-identifier">sty</span></a></a><span>
</span><a name="line-246"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="Outputable.html#debugStyle"><span class="hs-identifier hs-var">debugStyle</span></a><span> </span><a href="#local-1627510534"><span class="hs-identifier hs-var">sty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;tv&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-247"></a><span class="hs-identifier">ppr_debug</span><span> </span><span class="hs-special">(</span><a href="Var.html#TcTyVar"><span class="hs-identifier hs-var">TcTyVar</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">tc_tv_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510535"><a href="#local-1627510535"><span class="hs-identifier">d</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><a name="local-1627510536"><a href="#local-1627510536"><span class="hs-identifier">sty</span></a></a><span>
</span><a name="line-248"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="Outputable.html#dumpStyle"><span class="hs-identifier hs-var">dumpStyle</span></a><span> </span><a href="#local-1627510536"><span class="hs-identifier hs-var">sty</span></a><span> </span><span class="hs-operator hs-var">||</span><span> </span><a href="Outputable.html#debugStyle"><span class="hs-identifier hs-var">debugStyle</span></a><span> </span><a href="#local-1627510536"><span class="hs-identifier hs-var">sty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="TcType.html#pprTcTyVarDetails"><span class="hs-identifier hs-var">pprTcTyVarDetails</span></a><span> </span><a href="#local-1627510535"><span class="hs-identifier hs-var">d</span></a><span class="hs-special">)</span><span>
</span><a name="line-249"></a><span class="hs-identifier">ppr_debug</span><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510537"><a href="#local-1627510537"><span class="hs-identifier">s</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">id_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510538"><a href="#local-1627510538"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><a name="local-1627510539"><a href="#local-1627510539"><span class="hs-identifier">sty</span></a></a><span>
</span><a name="line-250"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a href="Outputable.html#debugStyle"><span class="hs-identifier hs-var">debugStyle</span></a><span> </span><a href="#local-1627510539"><span class="hs-identifier hs-var">sty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#ppr_id_scope"><span class="hs-identifier hs-var">ppr_id_scope</span></a><span> </span><a href="#local-1627510537"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a><span> </span><a href="IdInfo.html#pprIdDetails"><span class="hs-identifier hs-var">pprIdDetails</span></a><span> </span><a href="#local-1627510538"><span class="hs-identifier hs-var">d</span></a><span class="hs-special">)</span><span>
</span><a name="line-251"></a><span class="hs-identifier">ppr_debug</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-252"></a><span>
</span><a name="line-253"></a><span class="hs-identifier">ppr_id_scope</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#IdScope"><span class="hs-identifier hs-type">IdScope</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-254"></a><a name="ppr_id_scope"><a href="Var.html#ppr_id_scope"><span class="hs-identifier">ppr_id_scope</span></a></a><span> </span><a href="Var.html#GlobalId"><span class="hs-identifier hs-var">GlobalId</span></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;gid&quot;</span><span>
</span><a name="line-255"></a><span class="hs-identifier">ppr_id_scope</span><span> </span><span class="hs-special">(</span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#Exported"><span class="hs-identifier hs-var">Exported</span></a><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;lidx&quot;</span><span>
</span><a name="line-256"></a><span class="hs-identifier">ppr_id_scope</span><span> </span><span class="hs-special">(</span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#NotExported"><span class="hs-identifier hs-var">NotExported</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;lid&quot;</span><span>
</span><a name="line-257"></a><span>
</span><a name="line-258"></a><span class="hs-keyword">instance</span><span> </span><a href="Name.html#NamedThing"><span class="hs-identifier hs-type">NamedThing</span></a><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-259"></a><span>  </span><a name="local-1912718357"><a href="Name.html#getName"><span class="hs-identifier">getName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">varName</span><span>
</span><a name="line-260"></a><span>
</span><a name="line-261"></a><span class="hs-keyword">instance</span><span> </span><a href="Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-262"></a><span>  </span><a name="local-1912670564"><a href="Unique.html#getUnique"><span class="hs-identifier">getUnique</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a><span>
</span><a name="line-263"></a><span>
</span><a name="line-264"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-265"></a><span>    </span><a name="local-1627510615"><a href="#local-1627510615"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-805306535"><span class="hs-operator">==</span></a><span> </span><a name="local-1627510616"><a href="#local-1627510616"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510615"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510616"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-266"></a><span>
</span><a name="line-267"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-268"></a><span>    </span><a name="local-1627510605"><a href="#local-1627510605"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-1912608789"><span class="hs-operator">&lt;=</span></a><span> </span><a name="local-1627510606"><a href="#local-1627510606"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510605"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&lt;=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510606"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-269"></a><span>    </span><a name="local-1627510607"><a href="#local-1627510607"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-1912608793"><span class="hs-operator">&lt;</span></a><span>  </span><a name="local-1627510608"><a href="#local-1627510608"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510607"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span>  </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510608"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-270"></a><span>    </span><a name="local-1627510609"><a href="#local-1627510609"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-805306536"><span class="hs-operator">&gt;=</span></a><span> </span><a name="local-1627510610"><a href="#local-1627510610"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510609"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&gt;=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510610"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-271"></a><span>    </span><a name="local-1627510611"><a href="#local-1627510611"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-1912608794"><span class="hs-operator">&gt;</span></a><span>  </span><a name="local-1627510612"><a href="#local-1627510612"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510611"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span>  </span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510612"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-272"></a><span>    </span><a name="local-1627510613"><a href="#local-1627510613"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-special">`</span><a name="local-1912608788"><span class="hs-identifier">compare</span></a><span class="hs-special">`</span><span> </span><a name="local-1627510614"><a href="#local-1627510614"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a><span> </span><a href="#local-1627510613"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">compare</span><span class="hs-special">`</span><span> </span><a href="Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a><span> </span><a href="#local-1627510614"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-273"></a><span>
</span><a name="line-274"></a><span class="hs-keyword">instance</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span></a><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-275"></a><span>  </span><span class="hs-comment">-- don't traverse?</span><span>
</span><a name="line-276"></a><span>  </span><a name="local-1912605825"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#toConstr"><span class="hs-identifier">toConstr</span></a></a><span> </span><span class="hs-identifier">_</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Util.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a><span> </span><span class="hs-string">&quot;Var&quot;</span><span>
</span><a name="line-277"></a><span>  </span><a name="local-1912605826"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#gunfold"><span class="hs-identifier">gunfold</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a><span> </span><span class="hs-string">&quot;gunfold&quot;</span><span>
</span><a name="line-278"></a><span>  </span><a name="local-1912605824"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#dataTypeOf"><span class="hs-identifier">dataTypeOf</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#mkNoRepType"><span class="hs-identifier hs-var">mkNoRepType</span></a><span> </span><span class="hs-string">&quot;Var&quot;</span><span>
</span><a name="line-279"></a><span>
</span><a name="line-280"></a><span class="hs-identifier">varUnique</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a><span>
</span><a name="line-281"></a><a name="varUnique"><a href="Var.html#varUnique"><span class="hs-identifier">varUnique</span></a></a><span> </span><a name="local-1627510540"><a href="#local-1627510540"><span class="hs-identifier">var</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Unique.html#mkUniqueGrimily"><span class="hs-identifier hs-var">mkUniqueGrimily</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">realUnique</span><span> </span><a href="#local-1627510540"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span>
</span><a name="line-282"></a><span>
</span><a name="line-283"></a><span class="hs-identifier">setVarUnique</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>
</span><a name="line-284"></a><a name="setVarUnique"><a href="Var.html#setVarUnique"><span class="hs-identifier">setVarUnique</span></a></a><span> </span><a name="local-1627510541"><a href="#local-1627510541"><span class="hs-identifier">var</span></a></a><span> </span><a name="local-1627510542"><a href="#local-1627510542"><span class="hs-identifier">uniq</span></a></a><span>
</span><a name="line-285"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510541"><span class="hs-identifier hs-var">var</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Unique.html#getKey"><span class="hs-identifier hs-var">getKey</span></a><span> </span><a href="#local-1627510542"><span class="hs-identifier hs-var">uniq</span></a><span class="hs-special">,</span><span>
</span><a name="line-286"></a><span>          </span><span class="hs-identifier">varName</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Name.html#setNameUnique"><span class="hs-identifier hs-var">setNameUnique</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">varName</span><span> </span><a href="#local-1627510541"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627510542"><span class="hs-identifier hs-var">uniq</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-287"></a><span>
</span><a name="line-288"></a><span class="hs-identifier">setVarName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>
</span><a name="line-289"></a><a name="setVarName"><a href="Var.html#setVarName"><span class="hs-identifier">setVarName</span></a></a><span> </span><a name="local-1627510543"><a href="#local-1627510543"><span class="hs-identifier">var</span></a></a><span> </span><a name="local-1627510544"><a href="#local-1627510544"><span class="hs-identifier">new_name</span></a></a><span>
</span><a name="line-290"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510543"><span class="hs-identifier hs-var">var</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Unique.html#getKey"><span class="hs-identifier hs-var">getKey</span></a><span> </span><span class="hs-special">(</span><a href="Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a><span> </span><a href="#local-1627510544"><span class="hs-identifier hs-var">new_name</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-291"></a><span>          </span><span class="hs-identifier">varName</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510544"><span class="hs-identifier hs-var">new_name</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-292"></a><span>
</span><a name="line-293"></a><span class="hs-identifier">setVarType</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-294"></a><a name="setVarType"><a href="Var.html#setVarType"><span class="hs-identifier">setVarType</span></a></a><span> </span><a name="local-1627510545"><a href="#local-1627510545"><span class="hs-identifier">id</span></a></a><span> </span><a name="local-1627510546"><a href="#local-1627510546"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510545"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">varType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510546"><span class="hs-identifier hs-var">ty</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span class="hs-identifier">updateVarType</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-297"></a><a name="updateVarType"><a href="Var.html#updateVarType"><span class="hs-identifier">updateVarType</span></a></a><span> </span><a name="local-1627510547"><a href="#local-1627510547"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-1627510548"><a href="#local-1627510548"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510548"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">varType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510547"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">varType</span><span> </span><a href="#local-1627510548"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-298"></a><span>
</span><a name="line-299"></a><span class="hs-identifier">updateVarTypeM</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-1627510533"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627510533"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627510533"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-300"></a><a name="updateVarTypeM"><a href="Var.html#updateVarTypeM"><span class="hs-identifier">updateVarTypeM</span></a></a><span> </span><a name="local-1627510549"><a href="#local-1627510549"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-1627510550"><a href="#local-1627510550"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1627510551"><a href="#local-1627510551"><span class="hs-identifier">ty'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1627510549"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">varType</span><span> </span><a href="#local-1627510550"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span>
</span><a name="line-301"></a><span>                         </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="#local-1627510550"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">varType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510551"><span class="hs-identifier hs-var">ty'</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-302"></a><span>
</span><a name="line-303"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Type and kind variables}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-310"></a><span>
</span><a name="line-311"></a><span class="hs-identifier">tyVarName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span>
</span><a name="line-312"></a><a name="tyVarName"><a href="Var.html#tyVarName"><span class="hs-identifier">tyVarName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">varName</span><span>
</span><a name="line-313"></a><span>
</span><a name="line-314"></a><span class="hs-identifier">tyVarKind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span>
</span><a name="line-315"></a><a name="tyVarKind"><a href="Var.html#tyVarKind"><span class="hs-identifier">tyVarKind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">varType</span><span>
</span><a name="line-316"></a><span>
</span><a name="line-317"></a><span class="hs-identifier">setTyVarUnique</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-318"></a><a name="setTyVarUnique"><a href="Var.html#setTyVarUnique"><span class="hs-identifier">setTyVarUnique</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#setVarUnique"><span class="hs-identifier hs-var">setVarUnique</span></a><span>
</span><a name="line-319"></a><span>
</span><a name="line-320"></a><span class="hs-identifier">setTyVarName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-321"></a><a name="setTyVarName"><a href="Var.html#setTyVarName"><span class="hs-identifier">setTyVarName</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#setVarName"><span class="hs-identifier hs-var">setVarName</span></a><span>
</span><a name="line-322"></a><span>
</span><a name="line-323"></a><span class="hs-identifier">setTyVarKind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-324"></a><a name="setTyVarKind"><a href="Var.html#setTyVarKind"><span class="hs-identifier">setTyVarKind</span></a></a><span> </span><a name="local-1627510552"><a href="#local-1627510552"><span class="hs-identifier">tv</span></a></a><span> </span><a name="local-1627510553"><a href="#local-1627510553"><span class="hs-identifier">k</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510552"><span class="hs-identifier hs-var">tv</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">varType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510553"><span class="hs-identifier hs-var">k</span></a><span class="hs-special">}</span><span>
</span><a name="line-325"></a><span>
</span><a name="line-326"></a><span class="hs-identifier">updateTyVarKind</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-327"></a><a name="updateTyVarKind"><a href="Var.html#updateTyVarKind"><span class="hs-identifier">updateTyVarKind</span></a></a><span> </span><a name="local-1627510554"><a href="#local-1627510554"><span class="hs-identifier">update</span></a></a><span> </span><a name="local-1627510555"><a href="#local-1627510555"><span class="hs-identifier">tv</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510555"><span class="hs-identifier hs-var">tv</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">varType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510554"><span class="hs-identifier hs-var">update</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-1627510555"><span class="hs-identifier hs-var">tv</span></a><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><a name="line-328"></a><span>
</span><a name="line-329"></a><span class="hs-identifier">updateTyVarKindM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-1627510532"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627510532"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-1627510532"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-330"></a><a name="updateTyVarKindM"><a href="Var.html#updateTyVarKindM"><span class="hs-identifier">updateTyVarKindM</span></a></a><span> </span><a name="local-1627510556"><a href="#local-1627510556"><span class="hs-identifier">update</span></a></a><span> </span><a name="local-1627510557"><a href="#local-1627510557"><span class="hs-identifier">tv</span></a></a><span>
</span><a name="line-331"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a name="local-1627510558"><a href="#local-1627510558"><span class="hs-identifier">k'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1627510556"><span class="hs-identifier hs-var">update</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-1627510557"><span class="hs-identifier hs-var">tv</span></a><span class="hs-special">)</span><span>
</span><a name="line-332"></a><span>       </span><span class="hs-special">;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a><span> </span><a href="#local-1627510557"><span class="hs-identifier hs-var">tv</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">varType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510558"><span class="hs-identifier hs-var">k'</span></a><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-333"></a><span>
</span><a name="line-334"></a><span class="hs-identifier">mkTyVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-335"></a><a name="mkTyVar"><a href="Var.html#mkTyVar"><span class="hs-identifier">mkTyVar</span></a></a><span> </span><a name="local-1627510559"><a href="#local-1627510559"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510560"><a href="#local-1627510560"><span class="hs-identifier">kind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">varName</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510559"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-336"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">realUnique</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Unique.html#getKey"><span class="hs-identifier hs-var">getKey</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a><span> </span><a href="#local-1627510559"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-337"></a><span>                          </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">varType</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510560"><span class="hs-identifier hs-var">kind</span></a><span>
</span><a name="line-338"></a><span>                          </span><span class="hs-special">}</span><span>
</span><a name="line-339"></a><span>
</span><a name="line-340"></a><span class="hs-identifier">mkTcTyVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcTyVarDetails"><span class="hs-identifier hs-type">TcTyVarDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-341"></a><a name="mkTcTyVar"><a href="Var.html#mkTcTyVar"><span class="hs-identifier">mkTcTyVar</span></a></a><span> </span><a name="local-1627510561"><a href="#local-1627510561"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510562"><a href="#local-1627510562"><span class="hs-identifier">kind</span></a></a><span> </span><a name="local-1627510563"><a href="#local-1627510563"><span class="hs-identifier">details</span></a></a><span>
</span><a name="line-342"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- NB: 'kind' may be a coercion kind; cf, 'TcMType.newMetaCoVar'</span><span>
</span><a name="line-343"></a><span>    </span><a href="Var.html#TcTyVar"><span class="hs-identifier hs-var">TcTyVar</span></a><span> </span><span class="hs-special">{</span><span>   </span><span class="hs-identifier">varName</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510561"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span>
</span><a name="line-344"></a><span>                </span><span class="hs-identifier">realUnique</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Unique.html#getKey"><span class="hs-identifier hs-var">getKey</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a><span> </span><a href="#local-1627510561"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-345"></a><span>                </span><span class="hs-identifier">varType</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510562"><span class="hs-identifier hs-var">kind</span></a><span class="hs-special">,</span><span>
</span><a name="line-346"></a><span>                </span><span class="hs-identifier">tc_tv_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510563"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-347"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-348"></a><span>
</span><a name="line-349"></a><span class="hs-identifier">tcTyVarDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcTyVarDetails"><span class="hs-identifier hs-type">TcTyVarDetails</span></a><span>
</span><a name="line-350"></a><a name="tcTyVarDetails"><a href="Var.html#tcTyVarDetails"><span class="hs-identifier">tcTyVarDetails</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#TcTyVar"><span class="hs-identifier hs-var">TcTyVar</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">tc_tv_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510564"><a href="#local-1627510564"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510564"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-351"></a><span class="hs-identifier">tcTyVarDetails</span><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                            </span><span class="hs-glyph">=</span><span> </span><a href="TcType.html#vanillaSkolemTv"><span class="hs-identifier hs-var">vanillaSkolemTv</span></a><span>
</span><a name="line-352"></a><span class="hs-identifier">tcTyVarDetails</span><span> </span><a name="local-1627510565"><a href="#local-1627510565"><span class="hs-identifier">var</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;tcTyVarDetails&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627510565"><span class="hs-identifier hs-var">var</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a><span> </span><a href="#local-1627510565"><span class="hs-identifier hs-var">var</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-353"></a><span>
</span><a name="line-354"></a><span class="hs-identifier">setTcTyVarDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TcType.html#TcTyVarDetails"><span class="hs-identifier hs-type">TcTyVarDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span>
</span><a name="line-355"></a><a name="setTcTyVarDetails"><a href="Var.html#setTcTyVarDetails"><span class="hs-identifier">setTcTyVarDetails</span></a></a><span> </span><a name="local-1627510566"><a href="#local-1627510566"><span class="hs-identifier">tv</span></a></a><span> </span><a name="local-1627510567"><a href="#local-1627510567"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510566"><span class="hs-identifier hs-var">tv</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">tc_tv_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510567"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-356"></a><span>
</span><a name="line-357"></a><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
\subsection{Ids}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-364"></a><span>
</span><a name="line-365"></a><span class="hs-identifier">idInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span>
</span><a name="line-366"></a><a name="idInfo"><a href="Var.html#idInfo"><span class="hs-identifier">idInfo</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">id_info</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510568"><a href="#local-1627510568"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510568"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-367"></a><span class="hs-identifier">idInfo</span><span> </span><a name="local-1627510569"><a href="#local-1627510569"><span class="hs-identifier">other</span></a></a><span>                   </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;idInfo&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627510569"><span class="hs-identifier hs-var">other</span></a><span class="hs-special">)</span><span>
</span><a name="line-368"></a><span>
</span><a name="line-369"></a><span class="hs-identifier">idDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span>
</span><a name="line-370"></a><a name="idDetails"><a href="Var.html#idDetails"><span class="hs-identifier">idDetails</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">id_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510570"><a href="#local-1627510570"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510570"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-371"></a><span class="hs-identifier">idDetails</span><span> </span><a name="local-1627510571"><a href="#local-1627510571"><span class="hs-identifier">other</span></a></a><span>                         </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;idDetails&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627510571"><span class="hs-identifier hs-var">other</span></a><span class="hs-special">)</span><span>
</span><a name="line-372"></a><span>
</span><a name="line-373"></a><span class="hs-comment">-- The next three have a 'Var' suffix even though they always build</span><span>
</span><a name="line-374"></a><span class="hs-comment">-- Ids, because Id.hs uses 'mkGlobalId' etc with different types</span><span>
</span><a name="line-375"></a><span class="hs-identifier">mkGlobalVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-376"></a><a name="mkGlobalVar"><a href="Var.html#mkGlobalVar"><span class="hs-identifier">mkGlobalVar</span></a></a><span> </span><a name="local-1627510572"><a href="#local-1627510572"><span class="hs-identifier">details</span></a></a><span> </span><a name="local-1627510573"><a href="#local-1627510573"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510574"><a href="#local-1627510574"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1627510575"><a href="#local-1627510575"><span class="hs-identifier">info</span></a></a><span>
</span><a name="line-377"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#mk_id"><span class="hs-identifier hs-var">mk_id</span></a><span> </span><a href="#local-1627510573"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1627510574"><span class="hs-identifier hs-var">ty</span></a><span> </span><a href="Var.html#GlobalId"><span class="hs-identifier hs-var">GlobalId</span></a><span> </span><a href="#local-1627510572"><span class="hs-identifier hs-var">details</span></a><span> </span><a href="#local-1627510575"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-378"></a><span>
</span><a name="line-379"></a><span class="hs-identifier">mkLocalVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-380"></a><a name="mkLocalVar"><a href="Var.html#mkLocalVar"><span class="hs-identifier">mkLocalVar</span></a></a><span> </span><a name="local-1627510576"><a href="#local-1627510576"><span class="hs-identifier">details</span></a></a><span> </span><a name="local-1627510577"><a href="#local-1627510577"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510578"><a href="#local-1627510578"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1627510579"><a href="#local-1627510579"><span class="hs-identifier">info</span></a></a><span>
</span><a name="line-381"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#mk_id"><span class="hs-identifier hs-var">mk_id</span></a><span> </span><a href="#local-1627510577"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1627510578"><span class="hs-identifier hs-var">ty</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#NotExported"><span class="hs-identifier hs-var">NotExported</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627510576"><span class="hs-identifier hs-var">details</span></a><span>  </span><a href="#local-1627510579"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-382"></a><span>
</span><a name="line-383"></a><span class="hs-identifier">mkCoVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a><span>
</span><a name="line-384"></a><span class="hs-comment">-- Coercion variables have no IdInfo</span><span>
</span><a name="line-385"></a><a name="mkCoVar"><a href="Var.html#mkCoVar"><span class="hs-identifier">mkCoVar</span></a></a><span> </span><a name="local-1627510580"><a href="#local-1627510580"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510581"><a href="#local-1627510581"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#mk_id"><span class="hs-identifier hs-var">mk_id</span></a><span> </span><a href="#local-1627510580"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1627510581"><span class="hs-identifier hs-var">ty</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#NotExported"><span class="hs-identifier hs-var">NotExported</span></a><span class="hs-special">)</span><span> </span><a href="IdInfo.html#coVarDetails"><span class="hs-identifier hs-var">coVarDetails</span></a><span> </span><a href="IdInfo.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a><span>
</span><a name="line-386"></a><span>
</span><a name="line-387"></a><span class="hs-comment">-- | Exported 'Var's will not be removed as dead code</span><span>
</span><a name="line-388"></a><span class="hs-identifier">mkExportedLocalVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-389"></a><a name="mkExportedLocalVar"><a href="Var.html#mkExportedLocalVar"><span class="hs-identifier">mkExportedLocalVar</span></a></a><span> </span><a name="local-1627510582"><a href="#local-1627510582"><span class="hs-identifier">details</span></a></a><span> </span><a name="local-1627510583"><a href="#local-1627510583"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510584"><a href="#local-1627510584"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1627510585"><a href="#local-1627510585"><span class="hs-identifier">info</span></a></a><span>
</span><a name="line-390"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#mk_id"><span class="hs-identifier hs-var">mk_id</span></a><span> </span><a href="#local-1627510583"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-1627510584"><span class="hs-identifier hs-var">ty</span></a><span> </span><span class="hs-special">(</span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#Exported"><span class="hs-identifier hs-var">Exported</span></a><span class="hs-special">)</span><span> </span><a href="#local-1627510582"><span class="hs-identifier hs-var">details</span></a><span> </span><a href="#local-1627510585"><span class="hs-identifier hs-var">info</span></a><span>
</span><a name="line-391"></a><span>
</span><a name="line-392"></a><span class="hs-identifier">mk_id</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#IdScope"><span class="hs-identifier hs-type">IdScope</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-393"></a><a name="mk_id"><a href="Var.html#mk_id"><span class="hs-identifier">mk_id</span></a></a><span> </span><a name="local-1627510586"><a href="#local-1627510586"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-1627510587"><a href="#local-1627510587"><span class="hs-identifier">ty</span></a></a><span> </span><a name="local-1627510588"><a href="#local-1627510588"><span class="hs-identifier">scope</span></a></a><span> </span><a name="local-1627510589"><a href="#local-1627510589"><span class="hs-identifier">details</span></a></a><span> </span><a name="local-1627510590"><a href="#local-1627510590"><span class="hs-identifier">info</span></a></a><span>
</span><a name="line-394"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">varName</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510586"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span>
</span><a name="line-395"></a><span>         </span><span class="hs-identifier">realUnique</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Unique.html#getKey"><span class="hs-identifier hs-var">getKey</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a><span> </span><a href="#local-1627510586"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-396"></a><span>         </span><span class="hs-identifier">varType</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510587"><span class="hs-identifier hs-var">ty</span></a><span class="hs-special">,</span><span>
</span><a name="line-397"></a><span>         </span><span class="hs-identifier">idScope</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510588"><span class="hs-identifier hs-var">scope</span></a><span class="hs-special">,</span><span>
</span><a name="line-398"></a><span>         </span><span class="hs-identifier">id_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510589"><span class="hs-identifier hs-var">details</span></a><span class="hs-special">,</span><span>
</span><a name="line-399"></a><span>         </span><span class="hs-identifier">id_info</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510590"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-400"></a><span>
</span><a name="line-401"></a><span class="hs-comment">-------------------</span><span>
</span><a name="line-402"></a><span class="hs-identifier">lazySetIdInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span>
</span><a name="line-403"></a><a name="lazySetIdInfo"><a href="Var.html#lazySetIdInfo"><span class="hs-identifier">lazySetIdInfo</span></a></a><span> </span><a name="local-1627510591"><a href="#local-1627510591"><span class="hs-identifier">id</span></a></a><span> </span><a name="local-1627510592"><a href="#local-1627510592"><span class="hs-identifier">info</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510591"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">id_info</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510592"><span class="hs-identifier hs-var">info</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-404"></a><span>
</span><a name="line-405"></a><span class="hs-identifier">setIdDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="IdInfo.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-406"></a><a name="setIdDetails"><a href="Var.html#setIdDetails"><span class="hs-identifier">setIdDetails</span></a></a><span> </span><a name="local-1627510593"><a href="#local-1627510593"><span class="hs-identifier">id</span></a></a><span> </span><a name="local-1627510594"><a href="#local-1627510594"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510593"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">id_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510594"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-407"></a><span>
</span><a name="line-408"></a><span class="hs-identifier">globaliseId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-409"></a><span class="hs-comment">-- ^ If it's a local, make it global</span><span>
</span><a name="line-410"></a><a name="globaliseId"><a href="Var.html#globaliseId"><span class="hs-identifier">globaliseId</span></a></a><span> </span><a name="local-1627510595"><a href="#local-1627510595"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510595"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#GlobalId"><span class="hs-identifier hs-var">GlobalId</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-411"></a><span>
</span><a name="line-412"></a><span class="hs-identifier">setIdExported</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-413"></a><span class="hs-comment">-- ^ Exports the given local 'Id'. Can also be called on global 'Id's, such as data constructors</span><span>
</span><a name="line-414"></a><span class="hs-comment">-- and class operations, which are born as global 'Id's and automatically exported</span><span>
</span><a name="line-415"></a><a name="setIdExported"><a href="Var.html#setIdExported"><span class="hs-identifier">setIdExported</span></a></a><span> </span><a name="local-1627510596"><a href="#local-1627510596"><span class="hs-identifier">id</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510596"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#Exported"><span class="hs-identifier hs-var">Exported</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-416"></a><span class="hs-identifier">setIdExported</span><span> </span><a name="local-1627510597"><a href="#local-1627510597"><span class="hs-identifier">id</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#GlobalId"><span class="hs-identifier hs-var">GlobalId</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627510597"><span class="hs-identifier hs-var">id</span></a><span>
</span><a name="line-417"></a><span class="hs-identifier">setIdExported</span><span> </span><a name="local-1627510598"><a href="#local-1627510598"><span class="hs-identifier">tv</span></a></a><span>                               </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a><span> </span><span class="hs-string">&quot;setIdExported&quot;</span><span> </span><span class="hs-special">(</span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627510598"><span class="hs-identifier hs-var">tv</span></a><span class="hs-special">)</span><span>
</span><a name="line-418"></a><span>
</span><a name="line-419"></a><span class="hs-identifier">setIdNotExported</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-420"></a><span class="hs-comment">-- ^ We can only do this to LocalIds</span><span>
</span><a name="line-421"></a><a name="setIdNotExported"><a href="Var.html#setIdNotExported"><span class="hs-identifier">setIdNotExported</span></a></a><span> </span><a name="local-1627510599"><a href="#local-1627510599"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isLocalId</span><span> </span><span class="hs-identifier">id</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-422"></a><span>                      </span><a href="#local-1627510599"><span class="hs-identifier hs-var">id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#NotExported"><span class="hs-identifier hs-var">NotExported</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-423"></a><span>
</span><a name="line-424"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Predicates over variables}
*                                                                      *
************************************************************************
-}</span><span>
</span><a name="line-431"></a><span>
</span><a name="line-432"></a><span class="hs-identifier">isTyVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-433"></a><a name="isTyVar"><a href="Var.html#isTyVar"><span class="hs-identifier">isTyVar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#isTKVar"><span class="hs-identifier hs-var">isTKVar</span></a><span>     </span><span class="hs-comment">-- Historical</span><span>
</span><a name="line-434"></a><span>
</span><a name="line-435"></a><span class="hs-identifier">isTKVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>  </span><span class="hs-comment">-- True of both type and kind variables</span><span>
</span><a name="line-436"></a><a name="isTKVar"><a href="Var.html#isTKVar"><span class="hs-identifier">isTKVar</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-437"></a><span class="hs-identifier">isTKVar</span><span> </span><span class="hs-special">(</span><a href="Var.html#TcTyVar"><span class="hs-identifier hs-var">TcTyVar</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-438"></a><span class="hs-identifier">isTKVar</span><span> </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-439"></a><span>
</span><a name="line-440"></a><span class="hs-identifier">isTcTyVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-441"></a><a name="isTcTyVar"><a href="Var.html#isTcTyVar"><span class="hs-identifier">isTcTyVar</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#TcTyVar"><span class="hs-identifier hs-var">TcTyVar</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-442"></a><span class="hs-identifier">isTcTyVar</span><span> </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-443"></a><span>
</span><a name="line-444"></a><span class="hs-identifier">isTyCoVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-445"></a><a name="isTyCoVar"><a href="Var.html#isTyCoVar"><span class="hs-identifier">isTyCoVar</span></a></a><span> </span><a name="local-1627510600"><a href="#local-1627510600"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a><span> </span><a href="#local-1627510600"><span class="hs-identifier hs-var">v</span></a><span> </span><span class="hs-operator hs-var">||</span><span> </span><a href="Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a><span> </span><a href="#local-1627510600"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-446"></a><span>
</span><a name="line-447"></a><span class="hs-identifier">isId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-448"></a><a name="isId"><a href="Var.html#isId"><span class="hs-identifier">isId</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-449"></a><span class="hs-identifier">isId</span><span> </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-450"></a><span>
</span><a name="line-451"></a><span class="hs-identifier">isCoVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-452"></a><span class="hs-comment">-- A coercion variable</span><span>
</span><a name="line-453"></a><a name="isCoVar"><a href="Var.html#isCoVar"><span class="hs-identifier">isCoVar</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">id_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510601"><a href="#local-1627510601"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="IdInfo.html#isCoVarDetails"><span class="hs-identifier hs-var">isCoVarDetails</span></a><span> </span><a href="#local-1627510601"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-454"></a><span class="hs-identifier">isCoVar</span><span> </span><span class="hs-identifier">_</span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-455"></a><span>
</span><a name="line-456"></a><span class="hs-identifier">isNonCoVarId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-457"></a><span class="hs-comment">-- A term variable (Id) that is /not/ a coercion variable</span><span>
</span><a name="line-458"></a><a name="isNonCoVarId"><a href="Var.html#isNonCoVarId"><span class="hs-identifier">isNonCoVarId</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">id_details</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627510602"><a href="#local-1627510602"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="IdInfo.html#isCoVarDetails"><span class="hs-identifier hs-var">isCoVarDetails</span></a><span> </span><a href="#local-1627510602"><span class="hs-identifier hs-var">details</span></a><span class="hs-special">)</span><span>
</span><a name="line-459"></a><span class="hs-identifier">isNonCoVarId</span><span> </span><span class="hs-identifier">_</span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-460"></a><span>
</span><a name="line-461"></a><span class="hs-identifier">isLocalId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-462"></a><a name="isLocalId"><a href="Var.html#isLocalId"><span class="hs-identifier">isLocalId</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-463"></a><span class="hs-identifier">isLocalId</span><span> </span><span class="hs-identifier">_</span><span>                            </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-464"></a><span>
</span><a name="line-465"></a><span class="hs-comment">-- | 'isLocalVar' returns @True@ for type variables as well as local 'Id's</span><span>
</span><a name="line-466"></a><span class="hs-comment">-- These are the variables that we need to pay attention to when finding free</span><span>
</span><a name="line-467"></a><span class="hs-comment">-- variables, or doing dependency analysis.</span><span>
</span><a name="line-468"></a><span class="hs-identifier">isLocalVar</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-469"></a><a name="isLocalVar"><a href="Var.html#isLocalVar"><span class="hs-identifier">isLocalVar</span></a></a><span> </span><a name="local-1627510603"><a href="#local-1627510603"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="Var.html#isGlobalId"><span class="hs-identifier hs-var">isGlobalId</span></a><span> </span><a href="#local-1627510603"><span class="hs-identifier hs-var">v</span></a><span class="hs-special">)</span><span>
</span><a name="line-470"></a><span>
</span><a name="line-471"></a><span class="hs-identifier">isGlobalId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-472"></a><a name="isGlobalId"><a href="Var.html#isGlobalId"><span class="hs-identifier">isGlobalId</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#GlobalId"><span class="hs-identifier hs-var">GlobalId</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-473"></a><span class="hs-identifier">isGlobalId</span><span> </span><span class="hs-identifier">_</span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-474"></a><span>
</span><a name="line-475"></a><span class="hs-comment">-- | 'mustHaveLocalBinding' returns @True@ of 'Id's and 'TyVar's</span><span>
</span><a name="line-476"></a><span class="hs-comment">-- that must have a binding in this module.  The converse</span><span>
</span><a name="line-477"></a><span class="hs-comment">-- is not quite right: there are some global 'Id's that must have</span><span>
</span><a name="line-478"></a><span class="hs-comment">-- bindings, such as record selectors.  But that doesn't matter,</span><span>
</span><a name="line-479"></a><span class="hs-comment">-- because it's only used for assertions</span><span>
</span><a name="line-480"></a><span class="hs-identifier">mustHaveLocalBinding</span><span>        </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-481"></a><a name="mustHaveLocalBinding"><a href="Var.html#mustHaveLocalBinding"><span class="hs-identifier">mustHaveLocalBinding</span></a></a><span> </span><a name="local-1627510604"><a href="#local-1627510604"><span class="hs-identifier">var</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#isLocalVar"><span class="hs-identifier hs-var">isLocalVar</span></a><span> </span><a href="#local-1627510604"><span class="hs-identifier hs-var">var</span></a><span>
</span><a name="line-482"></a><span>
</span><a name="line-483"></a><span class="hs-comment">-- | 'isExportedIdVar' means \&quot;don't throw this away\&quot;</span><span>
</span><a name="line-484"></a><span class="hs-identifier">isExportedId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Var.html#Var"><span class="hs-identifier hs-type">Var</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-485"></a><a name="isExportedId"><a href="Var.html#isExportedId"><span class="hs-identifier">isExportedId</span></a></a><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#GlobalId"><span class="hs-identifier hs-var">GlobalId</span></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-486"></a><span class="hs-identifier">isExportedId</span><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-var">Id</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">idScope</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Var.html#LocalId"><span class="hs-identifier hs-var">LocalId</span></a><span> </span><a href="Var.html#Exported"><span class="hs-identifier hs-var">Exported</span></a><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-487"></a><span class="hs-identifier">isExportedId</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-488"></a></pre></body></html>